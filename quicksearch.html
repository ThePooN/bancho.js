<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"lib_IrcCommand.js.html":{"id":"lib_IrcCommand.js.html","title":"Source: lib/IrcCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommand.js /** * Incoming IRC Command * * @abstract * @private */ class IrcCommand { constructor() { if(new.target === IrcCommand) throw new Error(\"Don't instanciate an abstract class you dumbass\"); } /** * Handles the IRC command * * @param {BanchoClient} client * @param {string} command * @param {array.&lt;string&gt;} splits */ // eslint-disable-next-line no-unused-vars handleCommand(client, command, splits) { throw new Error(\"Unimplemented command!\"); } } module.exports = IrcCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_StatsCommand_BanchoBotStatsCommand.js.html":{"id":"lib_StatsCommand_BanchoBotStatsCommand.js.html","title":"Source: lib/StatsCommand/BanchoBotStatsCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/StatsCommand/BanchoBotStatsCommand.js const BanchoBotStatsReturn = require(\"./BanchoBotStatsReturn\"); /** * Class representing a BanchoBot !stats command being ran. * Collects data sent back by BanchoBot and set the appropriate variables. * * @private */ class BanchoBotStatsCommand { constructor(user) { this.user = user; this.promise = null; this.resolve = null; this.reject = null; this.return = new BanchoBotStatsReturn(user); const userNotFoundListener = (msg) =&gt; { if(msg.message == \"User not found\") { this.reject(new Error(\"User not found\")); this._removeListeners(); } }; const statusListener = (msg) =&gt; { const m = /Stats for \\((.+)\\)\\[https:\\/\\/osu\\.ppy\\.sh\\/u\\/(\\d+)\\]( is (.+))?:/.exec(msg.message); if(m &amp;&amp; this._usernameMatchesIrcUsername(m[1])) { this.user.username = m[1]; this.user.id = Number(m[2]); this.return.status = m[4]; this.return.online = m[4] != null; } }; const scoreListener = (msg) =&gt; { const m = /Score: {4}(.+) \\(#(\\d+)\\)/.exec(msg.message); if(m) { this.user.rankedScore = Number(m[1].replace(/,/g, \"\")); this.user.ppRank = Number(m[2]); } }; const playsListener = (msg) =&gt; { const m = /Plays: {4}(\\d+) \\(lv(\\d+)\\)/.exec(msg.message); if(m) { this.user.playcount = Number(m[1]); // Levels returned by !stats are inaccurate so we're simply setting it in the return object instead. this.return.level = Number(m[2]); } }; const accuracyListener = (msg) =&gt; { const m = /Accuracy: (\\d+(\\.\\d+)?)%/.exec(msg.message); if(m) { // Accuracy returned by !stats are inaccurate so we're simply setting it in the return object instead. this.return.accuracy = Number(m[1]); this.resolve(this.return); this._removeListeners(); } }; this.listeners = [userNotFoundListener, statusListener, scoreListener, playsListener, accuracyListener]; } /** * Sends the !stats command. * Promise is rejected if the user can't be found, otherwise update values from BanchoUser and returns a BanchoBotStatsReturn object. * * @async * @return Promise&lt;BanchoBotStatsReturn&gt; */ run() { if(this.promise == null) this.promise = new Promise((resolve, reject) =&gt; { this.resolve = resolve; this.reject = reject; this._registerListeners(); this.user.banchojs.getUser(\"BanchoBot\").sendMessage(\"!stats \"+this.user.ircUsername); }); return this.promise; } _usernameMatchesIrcUsername(username) { return username.replace(/ /g, \"_\").toLowerCase() == this.user.ircUsername.toLowerCase(); } _registerListeners() { for(const listener of this.listeners) this.user.banchojs.getUser(\"BanchoBot\").on(\"message\", listener); } _removeListeners() { for(const listener of this.listeners) this.user.banchojs.getUser(\"BanchoBot\").removeListener(\"message\", listener); } } module.exports = BanchoBotStatsCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_StatsCommand_BanchoBotStatsReturn.js.html":{"id":"lib_StatsCommand_BanchoBotStatsReturn.js.html","title":"Source: lib/StatsCommand/BanchoBotStatsReturn.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/StatsCommand/BanchoBotStatsReturn.js /** * Contains properties returned by the BanchoBot !stats command that can't be set in BanchoUser. * * @prop {BanchoUser} user * @prop {number} level Truncated value of levels (eg. 102) * @prop {number} accuracy * @prop {string} status In-game status (eg. Afk, Idle, Playing...) * @prop {boolean} online Set to true if user is online *in-game*. */ class BanchoBotStatsReturn { constructor(user) { this.user = user; this.level = null; this.accuracy = null; this.status = null; this.online = false; } } module.exports = BanchoBotStatsReturn; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoChannel.js.html":{"id":"lib_BanchoChannel.js.html","title":"Source: lib/BanchoChannel.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoChannel.js const EventEmitter = require(\"events\").EventEmitter; const OutgoingBanchoMessage = require(\"./OutgoingBanchoMessage.js\"); /** * Represents a discussion channel (not including PMs) * * @prop {string} name Channel name as it is referred to on IRC (including #) * @prop {string} topic * @prop {boolean} joined Whether we've joined the channel or not * @prop {Map&lt;string,BanchoChannelMember&gt;} channelMembers Members of the channel, referenced by their name * @extends EventEmitter */ class BanchoChannel extends EventEmitter { /** * Creates an instance of BanchoChannel. * @param {BanchoClient} banchojs bancho.js client * @param {string} name Channel name as it is referred to on IRC (including #) */ constructor(banchojs, name) { super(); this.banchojs = banchojs; this.name = name; this.topic = \"\"; this.joined = false; this.joinCallback = null; this.joinPromise = null; this.partCallback = null; this.partPromise = null; this.channelMembers = new Map(); this.listenersInitialized = false; } on() { if(!this.listenersInitialized) { this.banchojs.on(\"CM\", (msg) =&gt; { if(msg.channel == this) /** * Emitted when a message is received in a BanchoChannel * @event BanchoChannel#message * @type {ChannelMessage} */ this.emit(\"message\", msg); }); this.banchojs.on(\"JOIN\", (member) =&gt; { if(member.channel == this) /** * Emitted when someone joins this channel * @event BanchoChannel#JOIN * @type {BanchoChannelMember} */ this.emit(\"JOIN\", member); }); this.banchojs.on(\"PART\", (member) =&gt; { if(member.channel == this) /** * Emitted when someone leaves this channel * @event BanchoChannel#PART * @type {BanchoChannelMember} */ this.emit(\"PART\", member); }); this.listenersInitialized = true; } super.on.apply(this, arguments); } /** * Sends a message to this channel * * Elevated Bancho users are advised to heavily sanitize their inputs. * * @async * @throws {Error} If we're offline * @param {string} message * @returns {Promise&lt;null&gt;} Resolves when message is sent (rate-limiting) */ sendMessage(message) { return (new OutgoingBanchoMessage(this.banchojs, this, message)).send(); } /** * Sends an ACTION message to this channel * * @async * @throws {Error} If we're offline * @param {string} message * @returns {Promise&lt;null&gt;} Resolves when message is sent (rate-limiting) */ sendAction(message) { return (new OutgoingBanchoMessage(this.banchojs, this, `\\x01ACTION ${message}\\x01`)).send(); } /** * Join the channel * * @async * @returns {Promise&lt;null&gt;} */ join() { return this._joinOrPart(\"JOIN\", \"joinCallback\", \"joinPromise\"); } /** * Leave the channel * * @async * @returns {Promise&lt;null&gt;} */ leave() { return this._joinOrPart(\"PART\", \"partCallback\", \"partPromise\"); } /** * Sub-function for join/leave calls * * @private * @param {string} action * @param {*} callbackProp * @param {*} promiseProp */ _joinOrPart(action, callbackProp, promiseProp) { if(action != \"JOIN\" &amp;&amp; action != \"PART\") throw new Error(\"wrong action dumbass\"); if(this[promiseProp] == null) this[promiseProp] = new Promise((resolve, reject) =&gt; { this.banchojs.send(action+\" \"+this.name); this[callbackProp] = (err) =&gt; { if(!err) resolve(); else reject(err); this[callbackProp] = null; this[promiseProp] = null; }; }); return this[promiseProp]; } } module.exports = BanchoChannel; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoChannelMember.js.html":{"id":"lib_BanchoChannelMember.js.html","title":"Source: lib/BanchoChannelMember.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoChannelMember.js const modes = require(\"./Enums/BanchoChannelMemberModes\"); /** * A Bancho channel member * @prop {BanchoChannel} channel * @prop {BanchoUser} user * @prop {BanchoChannelMemberMode} mode */ class BanchoChannelMember { constructor(client, channel, userString) { this.channel = channel; let username = userString; if(userString.indexOf(\"@\") == 0) { this.mode = modes.o; username = username.substr(1, username.length - 1); } else if(userString.indexOf(\"+\") == 0) { this.mode = modes.v; username = username.substr(1, username.length - 1); } else this.mode = null; this.user = client.getUser(username); } } module.exports = BanchoChannelMember; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoChannelMemberMode.js.html":{"id":"lib_BanchoChannelMemberMode.js.html","title":"Source: lib/BanchoChannelMemberMode.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoChannelMemberMode.js /** * A Bancho channel user mode, or \"IRC modes\". * Used by Bancho to mark someone in a channel as an IRC user or a moderator. * * @prop {string} ircLetter Letter used in the MODE command to represent this mode * @prop {string} name Name to describe the mode */ class BanchoChannelMemberMode { constructor(ircLetter, name) { this.ircLetter = ircLetter; this.name = name; } } module.exports = BanchoChannelMemberMode; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Enums_BanchoChannelMemberModes.js.html":{"id":"lib_Enums_BanchoChannelMemberModes.js.html","title":"Source: lib/Enums/BanchoChannelMemberModes.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Enums/BanchoChannelMemberModes.js const BanchoChannelMemberMode = require(\"../BanchoChannelMemberMode\"); /** * Contains all the different Bancho channel member modes * @readonly * @enum {BanchoChannelMemberMode} * @private */ const BanchoChannelMemberModes = { \"v\": new BanchoChannelMemberMode(\"v\", \"IRC user\"), \"o\": new BanchoChannelMemberMode(\"o\", \"Moderator\") }; module.exports = Object.freeze(BanchoChannelMemberModes); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoClient.js.html":{"id":"lib_BanchoClient.js.html","title":"Source: lib/BanchoClient.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoClient.js const net = require(\"net\"); const EventEmitter = require(\"events\").EventEmitter; const CacheMap = require(\"./CacheMap\"); const BanchoUser = require(\"./BanchoUser\"); const BanchoChannel = require(\"./BanchoChannel\"); const BanchoMultiplayerChannel = require(\"./BanchoMultiplayerChannel\"); const ConnectStates = require(\"./Enums/ConnectStates\"); const IrcCommands = require(\"./Enums/IrcCommands\"); const Nodesu = require(\"nodesu\"); const RateLimiterMemory = require(\"rate-limiter-flexible\").RateLimiterMemory; const RateLimiterQueue = require(\"rate-limiter-flexible\").RateLimiterQueue; const PrivateMessage = require(\"./PrivateMessage\"); const ChannelMessage = require(\"./ChannelMessage\"); const ignoredSplits = [ \"312\", // Whois server info (useless on Bancho) \"333\", // Time when topic was set \"366\", // End of NAMES reply \"372\", // MOTD \"375\", // MOTD Begin \"376\", // MOTD End ]; /** * Client to connect to Bancho over its IRC gateway * @property {nodesu.Client} osuApi Populated with a Nodesu client, if api key is passed to the constructor * @extends {EventEmitter} */ class BanchoClient extends EventEmitter { /** * @constructor * @param {BanchoClientOptions} options */ constructor(optionsOrUsername = {}, password, host = \"irc.ppy.sh\", port = 6667, apiKey, limiterTimespan, limiterPrivate, limiterPublic) { super(); if(optionsOrUsername != null &amp;&amp; typeof optionsOrUsername == \"string\" &amp;&amp; password != null &amp;&amp; typeof password == \"string\") { process.emitWarning(\"You're using the deprecated way of constructing a BanchoClient object! Please refer to the documentation for the up-to-date constructor. This constructor will be removed in Release 1.0.0.\"); if(limiterTimespan || limiterPrivate || limiterPublic) process.emitWarning(\"Rate-limiter support has been removed from the deprecated constructor in v0.10. This warning will disappear in v1.0.0.\"); this.username = optionsOrUsername; this.password = password; this.host = host; this.port = port; if(apiKey) this.osuApi = new Nodesu.Client(apiKey, { parseData: true }); this.rateLimiter = new RateLimiterQueue(new RateLimiterMemory({ points: limiterPrivate, duration: limiterTimespan / 1000 })); } else if(typeof optionsOrUsername == \"object\") { /** * Options for a BanchoClient. * @typedef {object} BanchoClientOptions * @prop {string} username Username of the user to connect to Bancho * @prop {string} password IRC Password of the user to connect to Bancho (see https://osu.ppy.sh/p/irc) * @prop {string} [host=\"irc.ppy.sh\"] Custom IRC host (for proxy-ing through a firewall for example) * @prop {number} [port=6667] Custom IRC port * @prop {string} [apiKey] osu! API key for API requests (see https://osu.ppy.sh/p/api). WARNING: Multiplayer lobbies won't work without an API key! * @prop {RateLimiter} [rateLimiter] Instance of RateLimiter from the `limiter` npm module for outgoing Bancho messages. Default is safe for normal users in private messages (PM and #multiplayer channels), bots are not supposed to send public messages. Can be disabled by setting to `null`. * @prop {boolean} [botAccount=false] Apply bot account rate-limits to the default RateLimiter instance if true (see https://osu.ppy.sh/wiki/en/Bot_account). * @prop {number} [gamemode=null] Gamemode id to fetch users with. Defaults to null */ const options = { host: \"irc.ppy.sh\", port: 6667, limiterTimespan: 25000, limiterPrivate: 18, limiterPublic: undefined, botAccount: false, gamemode: null, }; Object.assign(options, optionsOrUsername); if(options.rateLimiter &amp;&amp; options.botAccount) process.emitWarning(\"You have set both a custom `rateLimiter` and `botAccount`. Your custom `rateLimiter` will take precedence. Remove `botAccount` to suppress this warning (no side-effect).\"); if(options.rateLimiter &amp;&amp; (optionsOrUsername.limiterTimespan || optionsOrUsername.limiterPrivate)) process.emitWarning(\"The `limiterTimespan` and `limiterPrivate` options have been deprecated in v0.10 and the custom `rateLimiter` you specified will take precedence. This warning will be removed in v1.0.0.\"); if(options.rateLimiter === undefined) { if(optionsOrUsername.limiterPublic) process.emitWarning(\"Public rate-limiter has been removed in v0.10. Bots are not supposed to send messages in public channels, only in PMs and #multiplayer. This warning will disappear in v1.0.0.\"); if(optionsOrUsername.limiterTimespan || optionsOrUsername.limiterPrivate) { process.emitWarning(\"The `limiterTimespan` and `limiterPrivate` options have been deprecated in v0.10. Support for these and this warning will be removed in v1.0.0.\"); if(options.botAccount) process.emitWarning(\"You have set both deprecated custom rate limits and `botAccount`. The default bot accounts limits will take precedence. This warning will be removed in v1.0.0.\"); } const limiterPrivate = options.botAccount ? 298 : options.limiterPrivate; const limiterTimespan = options.botAccount ? 62500 : options.limiterTimespan; options.rateLimiter = new RateLimiterQueue(new RateLimiterMemory({ points: limiterPrivate, duration: limiterTimespan / 1000 })); } this.username = options.username; this.password = options.password; this.host = options.host; this.port = options.port; if(options.apiKey) { this.osuApi = new Nodesu.Client(options.apiKey, { parseData: true }); this.gamemode = options.gamemode; } this.rateLimiter = options.rateLimiter; } this.setMaxListeners(50); if(!this.username || !this.password) throw new Error(\"You gotta gimme an username and a password to connect to Bancho dumbass\"); this.client = null; this.connectState = ConnectStates.Disconnected; this.reconnect = true; this.reconnectTimeout = null; this.connectCallback = null; this.joinCallbacks = []; this.partCallbacks = []; this.users = new CacheMap(); this.usersById = new CacheMap(); this.channels = {}; this.messagesQueue = []; // Register our own error listener so there are no uncaught exceptions // for exceptions WE throw for the end-user that don't need to be caught (such as timeouts) this.on(\"error\", function() { }); this.ignoreClose = false; // TODO: find something better than this solution. it works and is 100% reliable though! also eventually try with process.nextTick instead of setTimeout() } async processMessagesQueue() { while(this.messagesQueue[0]) { const { message, resolve, reject } = this.messagesQueue[0]; try { if(!this.isConnected()) throw new Error(\"Currently disconnected!\"); if(this.rateLimiter) await this.rateLimiter.removeTokens(1); if(!this.isConnected()) throw new Error(\"Currently disconnected!\"); let name = null; if(message.recipient instanceof BanchoUser) name = message.recipient.ircUsername; else if(message.recipient instanceof BanchoChannel) name = message.recipient.name; else throw new Error(\"Recipient isn't a BanchoUser or BanchoChannel!\"); name = name.replace(/ /g, \"_\").split(\"\\n\")[0].substring(0, 28); const content = message.message.split(\"\\n\")[0]; this.send(`PRIVMSG ${name} :${content}`, false); if(message.recipient instanceof BanchoUser) this.emit(\"PM\", new PrivateMessage(this.getSelf(), content, true, message.recipient)); else if(message.recipient instanceof BanchoChannel) this.emit(\"CM\", new ChannelMessage(this.getSelf(), content, true, message.recipient)); this.messagesQueue.shift(); resolve(); } catch(e) { reject(e); } } } /** * Before connecting, (re)defines the socket and all callbacks, because the client might get destroyed. * @fires BanchoClient#error * @private */ initSocket() { this.client = (new net.Socket()).setTimeout(60000); this.client.on(\"error\", (err) =&gt; { /** * An error has occured on the socket. * @event BanchoClient#error * @type {Error} */ this.emit(\"error\", err); this.onClose(err); }); this.client.on(\"close\", () =&gt; { if(!this.ignoreClose) this.onClose(new Error(\"Connection closed\")); }); this.client.on(\"timeout\", () =&gt; { const err = new Error(\"Timeout reached\"); this.ignoreClose = true; this.client.destroy(); this.emit(\"error\", err); this.onClose(err); setTimeout(() =&gt; this.ignoreClose = false, 1); // close event is apparently not fired immediately after calling destroy... }); let unparsedData = \"\"; this.client.on(\"data\", (data) =&gt; { data = data.toString().replace(/\\r/g, \"\"); // Sometimes, Bancho sends \\r, and sometimes it doesn't. unparsedData += data; var index; while((index = unparsedData.indexOf(\"\\n\")) != -1) { var command = unparsedData.substring(0, index); unparsedData = unparsedData.substring(index + 1); // 1 is the length of \\n, it being 1 special character and not 2. this.handleIrcCommand(command); } }); } /** * Send raw data over IRC. * @param {string} data * @param {boolean} throwIfDisconnected Throws an Error if we're disconnected * @private */ send(data, throwIfDisconnected = true) { if(this.connectState == ConnectStates.Connected || this.connectState == ConnectStates.Connecting) this.client.write(data + \"\\r\\n\"); else if(throwIfDisconnected) throw new Error(\"Currently disconnected!\"); } /** * Update connection state * @param {ConnectState} newConnectState * @param {Error} err Error to emit with the new state * @fires BanchoClient#connected * @fires BanchoClient#disconnected * @fires BanchoClient#state * @private */ updateState(newConnectState, err) { if(newConnectState == this.connectState) return; if(newConnectState != ConnectStates.Disconnected &amp;&amp; newConnectState != ConnectStates.Reconnecting &amp;&amp; newConnectState != ConnectStates.Connecting &amp;&amp; newConnectState != ConnectStates.Connected) throw new Error(\"Invalid connect state!\"); this.connectState = newConnectState; if(this.isConnected()) /** * Connected to Bancho! * @event BanchoClient#connected */ this.emit(\"connected\"); if(this.isDisconnected()) /** * Disconnected from Bancho! * @event BanchoClient#disconnected * @type {Error} */ this.emit(\"disconnected\", err); /** * ConnectState has updated! Emits with an error if any. * @event BanchoClient#state * @type {Error} */ this.emit(\"state\", this.connectState, err); } /** * Executed when connection is expectedly or not closed * @param {Error} err * @private */ onClose(err) { // Every currently joined channel should be considered left. for(const channel of Object.values(this.channels)) if(channel.joined) IrcCommands.PART.emit(this, this.getSelf(), channel); if(this.connectState == ConnectStates.Disconnected) return; if(!this.reconnect) return this.updateState(ConnectStates.Disconnected, err); this.updateState(ConnectStates.Reconnecting, err); if(this.reconnectTimeout) clearTimeout(this.reconnectTimeout); this.reconnectTimeout = setTimeout(() =&gt; { if(this.reconnect) { const oldCallback = this.connectCallback; this.connect(); this.connectCallback = oldCallback; } this.reconnectTimeout = null; }, 5000); } /** * Handle incoming IRC commands from Bancho * @param {string} command * @private */ handleIrcCommand(command) { const splits = command.split(\" \"); if(ignoredSplits.indexOf(splits[1]) != -1) return; if(splits[0] == \"PING\") { splits.shift(); this.send(\"PONG \"+splits.join(\" \")); } else if(IrcCommands[splits[1]]) (IrcCommands[splits[1]]).handleCommand(this, splits[1], splits); /*else console.log(\"Unknown command\", command);*/ } /** * Get a BanchoUser instance for the specified username * * @param {string} username * @returns {BanchoUser} */ getUser(username) { username = username.replace(/ /g, \"_\").split(\"\\n\")[0].substring(0, 28); let user = this.users.get(username.toLowerCase()); if(!user) { user = new BanchoUser(this, username); this.users.set(username.toLowerCase(), user); } return user; } /** * Get a BanchoUser representing ourself */ getSelf() { return this.getUser(this.username); } /** * Get a BanchoUser instance for the specified user id * * @async * @param {number} userid * @returns {Promise&lt;BanchoUser&gt;} */ getUserById(userid) { return new Promise((resolve, reject) =&gt; { if(isNaN(userid)) reject(new Error(\"id needs to be a number!\")); let user = this.usersById.get(userid); if(user) resolve(user); else this.osuApi.user.get(userid, this.gamemode, null, Nodesu.LookupType.id).then((apiUser) =&gt; { user = this.getUser(apiUser.username); user.updateFromAPI(apiUser); resolve(user); }, reject); }); } /** * Get a BanchoChannel instance for the specified name * * @param {string} channelName * @returns {BanchoChannel|BanchoMultiplayerChannel} */ getChannel(channelName) { if(channelName.indexOf(\"#\") != 0 || channelName.indexOf(\",\") != -1 || channelName.indexOf(\"\u0007\") != -1) throw new Error(\"Invalid channel name!\"); let channel = this.channels[channelName]; if(!channel) { channel = (channelName.indexOf(\"#mp_\") == 0 &amp;&amp; this.osuApi != null) ? new BanchoMultiplayerChannel(this, channelName) : new BanchoChannel(this, channelName); this.channels[channelName] = channel; } return channel; } /** * Creates a multiplayer lobby and return its channel. * * @async * @param {string} name Lobby name * @param {boolean} [privateLobby] Mark as private * @returns {BanchoMultiplayerChannel} */ createLobby(name, privateLobby = false) { return new Promise((resolve, reject) =&gt; { if(this.osuApi == null) throw new Error(\"bancho.js needs an API key for full multiplayer lobbies support!\"); if(!name || !name.trim()) throw new Error(\"Empty name!\"); name = name.trim(); const BanchoBot = this.getUser(\"BanchoBot\"); const command = !privateLobby ? \"make\" : \"makeprivate\"; BanchoBot.sendMessage(\"!mp \"+command+\" \"+name).then(() =&gt; { setTimeout(() =&gt; { reject(new Error(\"Multiplayer lobby creation timeout has been reached!\")); }, 10000); const matchCreatedRegex = /Created the tournament match https:\\/\\/osu\\.ppy\\.sh\\/mp\\/(\\d+) (.+)/; const listener = (msg) =&gt; { const m = matchCreatedRegex.exec(msg.message); if(!m || m[2] != name) return; BanchoBot.removeListener(\"message\", listener); const channel = this.getChannel(\"#mp_\"+Number(m[1])); if(!channel.lobby) return reject(new Error(\"Not a multiplayer channel?! This shouldn't happen...\")); resolve(channel); }; BanchoBot.on(\"message\", listener); }); }); } /** * Connects to Bancho, rejects an Error if connection fails * * @method * @async * @return {Promise&lt;null, Error&gt;} */ connect() { return new Promise((resolve, reject) =&gt; { if(this.connectState == ConnectStates.Connected || this.connectState == ConnectStates.Connecting) return reject(new Error(\"Already connected/connecting\")); this.connectCallback = (err) =&gt; { if(err) return reject(err); resolve(); }; this.updateState(ConnectStates.Connecting); this.reconnect = true; this.initSocket(); this.client.connect(this.port, this.host, () =&gt; { this.send(\"PASS \"+this.password); this.send(\"USER \"+this.username+\" 0 * :\"+this.username); this.send(\"NICK \"+this.username); }); }); } /** * Disconnects from Bancho * * @method */ disconnect() { if(this.connectState == ConnectStates.Disconnected) return; if(this.isConnected()) this.send(\"QUIT\"); else if(this.connectState == ConnectStates.Connecting) this.client.destroy(); if(this.reconnectTimeout) { clearTimeout(this.reconnectTimeout); this.reconnectTimeout = null; } this.updateState(ConnectStates.Disconnected); setTimeout(() =&gt; this.ignoreClose = false, 1); // close event is apparently not fired immediately after calling destroy... } } /** * When we've just connected, execute the connect callback * * @param {any} arg Arg to pass to the callback * @param {boolean} [erase=true] Erase the existing callback * @param {boolean} [throwIfNonexistant=false] Throw an error if the callback doesn't exist * @private */ callConnectCallback(arg, erase = true, throwIfNonexistant = false) { if(this.connectCallback != null) { this.connectCallback(arg); if(erase) this.connectCallback = null; } else if(throwIfNonexistant) throw new Error(\"Inexistant connect callback!\"); } /** * Returns the current connection state. * * @returns {Symbol} Current connection state. See ConnectStates */ getConnectState() { return this.connectState; } /** * Returns true if the connectState is Connected, otherwise false. * * @returns {boolean} */ isConnected() { return (this.connectState == ConnectStates.Connected); } /** * Returns true if the connectState is Disconnected, otherwise false. * * @returns {boolean} */ isDisconnected() { return (this.connectState == ConnectStates.Disconnected); } } module.exports = BanchoClient; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_MessageCommand.js.html":{"id":"lib_IrcCommands_MessageCommand.js.html","title":"Source: lib/IrcCommands/MessageCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/MessageCommand.js const IrcCommand = require(\"../IrcCommand\"); const PrivateMessage = require(\"../PrivateMessage\"); const ChannelMessage = require(\"../ChannelMessage\"); /** * Message IRC command * @description Received when a message is sent in either channels or PMs. * @fires BanchoClient#PM * @fires BanchoClient#CM * @extends {IrcCommand} * @private */ class MessageCommand extends IrcCommand { handleCommand(client, command, splits) { const user = client.getUser(splits[0].substr(1, splits[0].indexOf(\"!\") - 1)); const message = splits.slice(3).join(\" \").substr(1); if(splits[2].toLowerCase() == client.username.toLowerCase()) /** * Fired when a PM is received, or sent from us (check for the `self` property). * @event BanchoClient#PM * @type {PrivateMessage} */ client.emit(\"PM\", new PrivateMessage(user, message, false, client.getSelf())); else if(splits[2].indexOf(\"#\") === -1) /** * Fired when Bancho sends us back a PM that couldn't be sent. * As far as we know, only happens when a PM is rejected because the recipient blocks messages from non-friends. * @event BanchoClient#rejectedMessage * @type {PrivateMessage} */ client.emit(\"rejectedMessage\", new PrivateMessage(client.getSelf(), message, true, client.getUser(splits[2]))); else /** * Fired when a channel message is received, or sent from us (check for the `self` property). * @event BanchoClient#CM * @type {ChannelMessage} */ client.emit(\"CM\", new ChannelMessage(user, message, false, client.getChannel(splits[2]))); } } module.exports = MessageCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_JoinCommand.js.html":{"id":"lib_IrcCommands_JoinCommand.js.html","title":"Source: lib/IrcCommands/JoinCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/JoinCommand.js const IrcCommand = require(\"../IrcCommand\"); const BanchoChannelMember = require(\"../BanchoChannelMember\"); /** * Join IRC command * @description Received when we or someone joins a channel. Executes join callbacks if that's us. * @extends {IrcCommand} * @private */ class JoinCommand extends IrcCommand { constructor() { super(); } /** * Emits the JOIN event * * @fires BanchoClient#JOIN * @param {BanchoClient} client * @param {BanchoUser} user * @param {BanchoChannel} channel */ emit(client, user, channel) { /** * Fired when a user has joined a channel * @event BanchoClient#JOIN * @type {BanchoChannelMember} */ const member = new BanchoChannelMember(client, channel, user.ircUsername); channel.channelMembers.set(user.ircUsername, member); client.emit(\"JOIN\", member); if(user.isClient()) { channel.joined = true; if(channel.joinCallback != null) channel.joinCallback(); } } handleCommand(client, command, splits) { const user = client.getUser((splits[0].split(\"!\"))[0].substr(1)); const channel = client.getChannel(splits[2].substr(1)); this.emit(client, user, channel); } } module.exports = JoinCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_ChannelNotFoundCommand.js.html":{"id":"lib_IrcCommands_ChannelNotFoundCommand.js.html","title":"Source: lib/IrcCommands/ChannelNotFoundCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/ChannelNotFoundCommand.js const IrcCommand = require(\"../IrcCommand\"); /** * Channel not found IRC command * @description Received when we tried to execute something on a channel that doesn't exist * @fires BanchoClient#nochannel * @extends {IrcCommand} * @private */ class ChannelNotFoundCommand extends IrcCommand { handleCommand(client, command, splits) { /** * Fired when a no channel error is received from Bancho. * * @event BanchoClient#nochannel * @type {BanchoChannel} */ const channel = client.getChannel(splits[3]); client.emit(\"nochannel\", channel); if(channel.joinCallback != null) channel.joinCallback(new Error(\"No such channel\")); if(channel.partCallback != null) channel.partCallback(new Error(\"No such channel\")); } } module.exports = ChannelNotFoundCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_UserNotFoundCommand.js.html":{"id":"lib_IrcCommands_UserNotFoundCommand.js.html","title":"Source: lib/IrcCommands/UserNotFoundCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/UserNotFoundCommand.js const IrcCommand = require(\"../IrcCommand\"); /** * User not found IRC command * @description Received when we tried to execute something on an user that is offline * @fires BanchoClient#nouser * @extends {IrcCommand} * @private */ class UserNotFoundCommand extends IrcCommand { handleCommand(client, command, splits) { /** * Fired when a no user error is received from Bancho. * * @event BanchoClient#nouser * @type {BanchoUser} */ const user = client.getUser(splits[3]); client.emit(\"nouser\", user); if(user.whoisUserNotFoundCallback != null) user.whoisUserNotFoundCallback(); } } module.exports = UserNotFoundCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_PartCommand.js.html":{"id":"lib_IrcCommands_PartCommand.js.html","title":"Source: lib/IrcCommands/PartCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/PartCommand.js const JoinCommand = require(\"./JoinCommand\"); /** * Part IRC command * @description Received when we or someone leaves a channel. Executes leaves callbacks if that's us. * @extends {IrcCommand} * @private */ class PartCommand extends JoinCommand { constructor() { super(); } /** * Emits the PART event * * @fires BanchoClient#PART * @param {BanchoClient} client * @param {BanchoUser} user * @param {BanchoChannel} channel */ emit(client, user, channel) { /** * Fired when a user has left a channel * @event BanchoClient#PART * @type {BanchoChannelMember} */ if(channel.channelMembers.has(user.ircUsername)) client.emit(\"PART\", channel.channelMembers.get(user.ircUsername)); if(user.isClient()) { channel.joined = false; channel.channelMembers.clear(); if(channel.partCallback != null) channel.partCallback(); } channel.channelMembers.delete(user.ircUsername); } } module.exports = PartCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_QuitCommand.js.html":{"id":"lib_IrcCommands_QuitCommand.js.html","title":"Source: lib/IrcCommands/QuitCommand.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/QuitCommand.js const IrcCommand = require(\"../IrcCommand\"); /** * Received when someone disconnects from Bancho (with no other client opened) * @extends IrcCommand * @private */ class QuitCommand extends IrcCommand { constructor() { super(); } handleCommand(client, command, splits) { const username = splits[0].substr(1, splits[0].indexOf(\"!\") - 1); const user = client.getUser(username); /** * Fired when a user has disconnected from Bancho (with no other client opened) * @event BanchoClient#QUIT * @type {BanchoUser} */ client.emit(\"QUIT\", user); for(const channel of Object.values(client.channels)) channel.channelMembers.delete(user.ircUsername); } } module.exports = QuitCommand; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: index.js /** * Main Banchojs class * @prop {BanchoClient} BanchoClient The BanchoClient class (Client alias is kept for history purposes) * @prop {OutgoingBanchoMessage} OutgoingBanchoMessage The OutgoingMessage class to produce messages * @prop {ConnectStates} ConnectStates An enum containing all the possible ConnectStates of bancho.js * @prop {BanchoLobbyPlayerStates} BanchoLobbyPlayerStates An enum containing the different player states for players in lobbies * @prop {BanchoLobbyTeamModes} BanchoLobbyTeamModes An enum containing the 4 different team modes in Bancho * @prop {BanchoLobbyTeams} BanchoLobbyTeams An enum containing the 2 different teams in a multiplayer lobby * @prop {BanchoLobbyWinConditions} BanchoLobbyWinConditions An enum containing the 4 win conditions on Bancho */ class Banchojs { constructor() { this.Client = this.BanchoClient = require(\"./lib/BanchoClient\"); this.BanchoMessage = require(\"./lib/BanchoMessage\"); this.PrivateMessage = require(\"./lib/PrivateMessage\"); this.ChannelMessage = require(\"./lib/ChannelMessage\"); this.OutgoingBanchoMessage = require(\"./lib/OutgoingBanchoMessage\"); this.ConnectStates = require(\"./lib/Enums/ConnectStates\"); this.BanchoLobbyPlayerStates = require(\"./lib/Multiplayer/Enums/BanchoLobbyPlayerStates\"); this.BanchoLobbyTeamModes = require(\"./lib/Multiplayer/Enums/BanchoLobbyTeamModes\"); this.BanchoLobbyTeams = require(\"./lib/Multiplayer/Enums/BanchoLobbyTeams\"); this.BanchoLobbyWinConditions = require(\"./lib/Multiplayer/Enums/BanchoLobbyWinConditions\"); this.BanchoMods = require(\"./lib/Multiplayer/Enums/BanchoMods\"); this.BanchoUser = require(\"./lib/BanchoUser\"); this.BanchoWhoisReturn = require(\"./lib/IrcCommands/whois/BanchoWhoisReturn\"); this.BanchoBotStatsReturn = require(\"./lib/StatsCommand/BanchoBotStatsReturn\"); this.BanchoChannel = require(\"./lib/BanchoChannel\"); this.BanchoMultiplayerChannel = require(\"./lib/BanchoMultiplayerChannel\"); this.BanchoLobby = require(\"./lib/Multiplayer/BanchoLobby\"); this.BanchoLobbyPlayer = require(\"./lib/Multiplayer/BanchoLobbyPlayer\"); this.BanchoLobbyPlayerScore = require(\"./lib/Multiplayer/BanchoLobbyPlayerScore\"); this.BanchoMod = require(\"./lib/Multiplayer/BanchoMod\"); this.BanchoChannelMemberMode = require(\"./lib/BanchoChannelMemberMode\"); this.BanchoChannelMember = require(\"./lib/BanchoChannelMember\"); } /** * Compares the provided object and return true if the object is an instance of BanchoMod. * * @param {any} mod */ isBanchoMod(mod) { return mod instanceof require(\"./lib/Multiplayer/BanchoMod\"); } /** * Compares the provided object and return true if the object is an instance of BanchoUser. * * @param {any} user */ isBanchoUser(user) { return user instanceof require(\"./lib/BanchoUser\"); } /** * Compares the provided object and return true if the object is an instance of BanchoChannel. * * @param {any} channel */ isBanchoChannel(channel) { return channel instanceof require(\"./lib/BanchoChannel\"); } /** * Compares the provided object and return true if the object is an instance of BanchoMultiplayerChannel. * * @param {any} channel */ isBanchoMultiplayerChannel(channel) { return channel instanceof require(\"./lib/BanchoMultiplayerChannel\"); } /** * Compares the provided object and return true if the object is an instance of BanchoLobby. * * @param {any} lobby */ isBanchoLobby(lobby) { return lobby instanceof require(\"./lib/Multiplayer/BanchoLobby\"); } /** * Compares the provided object and return true if the object is an instance of BanchoChannelMember. * * @param {any} member */ isBanchoChannelMember(member) { return member instanceof require(\"./lib/BanchoChannelMember\"); } /** * Compares the provided object and return true if the object is an instance of BanchoMessage. * * @param {any} message */ isBanchoMessage(message) { return message instanceof require(\"./lib/BanchoMessage\"); } /** * Compares the provided object and return true if the object is an instance of ChannelMessage. * * @param {any} message */ isChannelMessage(message) { return message instanceof require(\"./lib/ChannelMessage\"); } /** * Compares the provided object and return true if the object is an instance of PrivateMessage. * * @param {any} message */ isPrivateMessage(message) { return message instanceof require(\"./lib/PrivateMessage\"); } } module.exports = new Banchojs(); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_BanchoLobby.js.html":{"id":"lib_Multiplayer_BanchoLobby.js.html","title":"Source: lib/Multiplayer/BanchoLobby.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/BanchoLobby.js const EventEmitter = require(\"events\").EventEmitter; const nodesu = require(\"nodesu\"); const BanchoMods = require(\"./Enums/BanchoMods\"); const BanchoLobbyPlayer = require(\"./BanchoLobbyPlayer\"); const BanchoLobbyPlayerScore = require(\"./BanchoLobbyPlayerScore\"); const BanchoLobbyPlayerStates = require(\"./Enums/BanchoLobbyPlayerStates\"); const BanchoLobbyTeams = require(\"./Enums/BanchoLobbyTeams\"); const Regexes = require(\"./BanchoLobbyRegexes\"); const Teams = require(\"./Enums/BanchoLobbyTeams\"); const BanchoLobbyTeamModes = require(\"./Enums/BanchoLobbyTeamModes\"); /** * Represents a Bancho multiplayer lobby * * Highly recommended to await updateSettings before manipulating (else some properties will be null). * * @prop {BanchoMultiplayerChannel} channel * @prop {number} id Multiplayer lobby ID (used in multiplayer history links) * @prop {string} name Name of the lobby, as seen in-game * @prop {Array&lt;BanchoLobbyPlayer&gt;} slots Array of BanchoLobbyPlayer determining each users' slot, from 0 to 15 * @prop {number} size Current size of the lobby * @prop {nodesu.ModeType} gamemode Current gamemode of the lobby, as specified by the latest !mp map call (Bancho limitation) * @prop {number} beatmapId * @prop {nodesu.Beatmap} beatmap Beatmap fetched from the API (late/not as reliable, use beatmapId when possible) * @prop {number} winCondition See BanchoLobbyWinConditions * @prop {number} teamMode See BanchoLobbyTeamModes * @prop {Array&lt;BanchoMod&gt;} mods * @prop {boolean} freemod * @prop {boolean} playing Whether we're currently playing or not * @prop {Array&lt;BanchoLobbyPlayerScore&gt;} scores Scores set during the currently ongoing match, or the previous match. Emptied when a new match starts. Sorted by pass and score once match is finished. */ class BanchoLobby extends EventEmitter { constructor(channel) { super(); this.channel = channel; this.banchojs = this.channel.banchojs; this.id = Number(channel.name.substring(\"#mp_\".length)); this.scores = []; this._name = \"\"; this._beatmapId = null; this._beatmap = null; this._teamMode = null; this._winCondition = null; this._mods = null; this._freemod = false; this._playing = false; this._slots = this._createSlotsArray(); this._size = 16; this._gamemode = nodesu.Mode.osu; this._allPlayersReadyOnUpdateSettings = true; // Players cache. Even when players leave, we wanna leave them cached here // for performance/API requests reasons. this.players = {}; // stored by names this.playersById = {}; this.slotsUpdatesQueue = []; this.playerCreationQueue = []; this.channel.on(\"JOIN\", (member) =&gt; { if(member.user.isClient()) // We have just joined the channel this.updateSettings(); // Let's retrieve all the properties of the lobby to begin with. }); this.channel.on(\"message\", (msg) =&gt; { if(msg.user.ircUsername.toLowerCase() == \"banchobot\") this.handleBanchoBotMessage(msg.message); }); this.updateSettingsPromise = null; } /** * Synchronous handling of operations on the room slots to avoid race conditions. * Slots management involves resolving usernames from BanchoBot's messages and can lead to race conditions. * @private * @param {function} func */ pushSlotsUpdateQueue(func) { this.slotsUpdatesQueue.push(func); if(this.slotsUpdatesQueue.length == 1) this.slotsUpdatesQueue[0](this.slotsUpdateCallback); // If there's no currently running function, execute the newest now } /** * Called by a function in the slots update queue when the next one can be called. * @private */ slotsUpdateCallback() { this.slotsUpdatesQueue.shift(); if(this.slotsUpdatesQueue[0]) this.slotsUpdatesQueue[0](this.slotsUpdateCallback); } /** * Synchronous handling of BanchoLobbyPlayer object creations. * As every first fetch of a BanchoLobbyPlayer object involves an API call and * we only want one BanchoLobbyPlayer at a time, we need to make creations of them async. * @private * @param {function} func */ pushPlayerCreationQueue(func) { this.playerCreationQueue.push(func); if(this.playerCreationQueue.length == 1) this.playerCreationQueue[0](this.playersCreationCallback); // If there's no currently running function, execute the newest now } /** * Called by a function in the players creation queue when the next one can be called. * @private */ playersCreationCallback() { this.playerCreationQueue.shift(); if(this.playerCreationQueue[0]) this.playerCreationQueue[0](this.playersCreationCallback); } /** * Find the regex corresponding to a BanchoBot's message and process them * @private * @param {string} str message from BanchoBot to parse */ handleBanchoBotMessage(str) { const regex = Regexes.findRegex(str); if(regex) { const ret = regex.ret; switch(regex.name) { case \"roomName\": case \"refereeChangedName\": this.name = ret.name; break; case \"teamModeWinConditions\": this.teamMode = ret.teamMode; this.winCondition = ret.winCondition; break; case \"activeMods\": this.mods = ret.mods; this.freemod = ret.freemod; break; case \"playerChangedBeatmap\": case \"refereeChangedBeatmap\": case \"beatmapFromSettings\": if(ret.id != this.beatmapId) { this.beatmapId = ret.id; this.beatmap = null; for(const player of this.slots) if(player != null) player.state = BanchoLobbyPlayerStates.NotReady; this.banchojs.osuApi.beatmaps.getByBeatmapId(this.beatmapId) .then((beatmap) =&gt; { if(beatmap[0]) { if(beatmap[0].id == this.beatmapId) this.beatmap = beatmap[0]; } else /** * Emitted when a selected map is not found on the osu! API. * @event BanchoLobby#beatmapNotFound * @type {number} */ this.emit(\"beatmapNotFound\", this.beatmapId); }) .catch((err) =&gt; this.banchojs.emit(\"error\", err)); } break; case \"refereeChangedMode\": this.gamemode = ret.mode; break; case \"playerChangedTeam\": this.getPlayerByName(ret.name).then((player) =&gt; { /** * @event BanchoLobby#playerChangedTeam * @type {object} * @prop {BanchoLobbyPlayer} player * @prop {string} team See BanchoLobbyTeams */ if(player.team == BanchoLobbyTeams[ret.team]) return; player.team = BanchoLobbyTeams[ret.team]; for(const player of this.slots) if(player != null &amp;&amp; player.state == BanchoLobbyPlayerStates.Ready) player.state = BanchoLobbyPlayerStates.NotReady; this.emit(\"playerChangedTeam\", { player: player, team: player.team }); }); break; case \"playerChangingBeatmap\": this.beatmapId = null; this.beatmap = null; break; case \"refereeChangedMods\": this.mods = ret.mods; this.freemod = ret.freemod; for(const player of this.slots) if(player != null &amp;&amp; player.state == BanchoLobbyPlayerStates.Ready) player.state = BanchoLobbyPlayerStates.NotReady; break; case \"playerJoined\": this.pushSlotsUpdateQueue(() =&gt; { this.getPlayerByName(ret.username).then((player) =&gt; { /** * @event BanchoLobby#playerJoined * @type {object} * @prop {BanchoLobbyPlayer} player * @prop {number} slot Starting from 0 * @prop {string} team Blue or Red */ player.reset(); player.team = ret.team; this.slots[ret.slot - 1] = player; this.emit(\"playerJoined\", { player: player, slot: (ret.slot - 1), team: ret.team }); this.emit(\"slots\", this.slots); this.slotsUpdateCallback(); }, (err) =&gt; { this.banchojs.emit(\"error\", err); this.slotsUpdateCallback(); }); }); break; case \"playerMoved\": this.pushSlotsUpdateQueue(() =&gt; { this.getPlayerByName(ret.username).then((player) =&gt; { /** * @event BanchoLobby#playerMoved * @type {object} * @prop {BanchoLobbyPlayer} player * @prop {number} slot Starting from 0 */ const oldSlot = this.getPlayerSlot(player); this.slots[ret.slot - 1] = player; if(oldSlot) { this.slots[oldSlot] = null; } this.emit(\"playerMoved\", { player: player, slot: (ret.slot - 1) }); this.emit(\"slots\", this.slots); this.slotsUpdateCallback(); }, (err) =&gt; { this.banchojs.emit(\"error\", err); this.slotsUpdateCallback(); }); }); break; case \"playerLeft\": this.pushSlotsUpdateQueue(() =&gt; { this.getPlayerByName(ret.username).then((player) =&gt; { /** * @event BanchoLobby#playerLeft * @type {BanchoLobbyPlayer} */ const slot = this.getPlayerSlot(player); if(slot) { this.slots[slot] = null; } this._allPlayersReadyOnUpdateSettings = true; this.emit(\"playerLeft\", player); if(player.isHost) { this.emit(\"hostCleared\"); this.emit(\"host\", null); } this.emit(\"slots\", this.slots); this.slotsUpdateCallback(); }, (err) =&gt; { this.banchojs.emit(\"error\", err); this.slotsUpdateCallback(); }); }); break; case \"playerBecameTheHost\": this.getPlayerByName(ret.username).then((player) =&gt; { /** * @event BanchoLobby#host * @type {BanchoLobbyPlayer} */ if(this.getHost() != null) this.getHost().isHost = false; player.isHost = true; this.emit(\"host\", player); }, (err) =&gt; this.banchojs.emit(\"error\", err)); break; case \"hostCleared\": const host = this.getHost(); if(host != null) host.isHost = false; /** * @event BanchoLobby#hostCleared */ this.emit(\"hostCleared\"); this.emit(\"host\", null); break; case \"allPlayersReady\": /** * @event BanchoLobby#allPlayersReady */ for(const player of this.slots) if(player != null) player.state = BanchoLobbyPlayerStates.Ready; this._allPlayersReadyOnUpdateSettings = false; this.emit(\"allPlayersReady\"); break; case \"matchStarted\": /** * @event BanchoLobby#matchStarted */ for(const player of this.slots) { if(player != null &amp;&amp; player.state == BanchoLobbyPlayerStates.Ready) { player.state = BanchoLobbyPlayerStates.NotReady; player.score = null; } } this.scores.length = 0; this.playing = true; this.emit(\"matchStarted\"); break; case \"playerFinished\": /** * @event BanchoLobby#playerFinished * @type {BanchoLobbyPlayerScore} */ this.getPlayerByName(ret.username).then((player) =&gt; { player.score = new BanchoLobbyPlayerScore(ret.score, ret.pass, player); this.scores.push(player.score); this.emit(\"playerFinished\", player.score); }, (err) =&gt; this.banchojs.emit(\"error\", err)); break; case \"matchAborted\": /** * @event BanchoLobby#matchAborted */ this.playing = false; this.emit(\"matchAborted\"); break; case \"matchFinished\": /** * @event BanchoLobby#matchFinished * @type {Array.&lt;BanchoLobbyPlayerScore&gt;} Sorted scores array */ // Due to players resolving, matchFinished may be emitted and scores sorted before every playerFinished are done being processed. // For some reason, even though a Promise may not have anything async, the \"then\" functions may still be executed asynchronously... // However, they seem to be executed in order for some reason. So a workaround for this is to wait for the callback of a resolved Promise to be called. Promise.resolve().then(() =&gt; { // This ensures sorting/emitting is executed after all names are resolved. this.pushPlayerCreationQueue(() =&gt; { this.sortScores(); this.playing = false; this.emit(regex.name, this.scores); this.playersCreationCallback(); }); }); break; case \"invalidBeatmapId\": case \"passwordRemoved\": case \"passwordChanged\": case \"userNotFound\": case \"slotsLocked\": case \"slotsUnlocked\": /** * @event BanchoLobby#invalidBeatmapId */ /** * @event BanchoLobby#passwordRemoved */ /** * @event BanchoLobby#passwordChanged */ /** * @event BanchoLobby#userNotFound */ /** * @event BanchoLobby#slotsLocked */ /** * @event BanchoLobby#slotsUnlocked */ this.emit(regex.name); break; case \"refereeAdded\": case \"refereeRemoved\": case \"userNotFoundUsername\": /** * @event BanchoLobby#refereeAdded * @type {string} */ /** * @event BanchoLobby#refereeRemoved * @type {string} */ /** * @event BanchoLobby#userNotFoundUsername * @type {string} */ this.emit(regex.name, ret.username); break; case \"matchSize\": this.size = ret.size; break; case \"matchSettings\": /** * @event BanchoLobby#matchSettings * @type {object} * @prop {number} size * @prop {number} teamMode See BanchoLobbyTeamModes * @prop {number} winCondition See BanchoLobbyWinConditions */ this.teamMode = ret.teamMode; if(!isNaN(ret.winCondition)) this.winCondition = ret.winCondition; if(!isNaN(ret.size)) this.size = ret.size; for(const player of this.slots) if(player != null &amp;&amp; player.state == BanchoLobbyPlayerStates.Ready) player.state = BanchoLobbyPlayerStates.NotReady; this.emit(\"matchSettings\", ret); break; case \"timerEnded\": case \"timerAborted\": /** * Emitted when a timer ends * @event BanchoLobby#timerEnded */ /** * Emitted when a timer is aborted * @event BanchoLobby#timerAborted */ this.emit(regex.name); break; case \"timerTick\": /** * Emitted when a timer ticks * @event BanchoLobby#timerTick * @type {object} * @prop {number} seconds */ this.emit(regex.name, ret.seconds); break; case \"startTimerStarted\": /** * Emitted when a start timer is started * @event BanchoLobby#startTimerStarted */ this.emit(regex.name, ret.seconds); break; case \"startTimerAborted\": /** * Emitted when a start timer is aborted * @event BanchoLobby#startTimerAborted */ this.emit(regex.name); break; case \"startTimerTick\": /** * Emitted when a start timer ticks * @event BanchoLobby#startTimerTick * @type {object} * @prop {number} seconds */ this.emit(regex.name, ret.seconds); break; } } } /** * Fetch the lobby from the osu! API. * * @async * @returns Promise&lt;nodesu.Multi&gt; */ fetchFromAPI() { return this.banchojs.osuApi.multi.getMatch(this.id); } /** * Set a given map in the lobby * @param {number|nodesu.Beatmap} map Either a beatmap ID or a Beatmap object from nodesu * @param {number} [gamemode] See nodesu.Mode. Defaults to current mode (osu! if undetected). * @async */ setMap(map, gamemode = this.gamemode) { return new Promise((resolve, reject) =&gt; { if(map instanceof nodesu.Beatmap) map = map.id; else if(isNaN(map)) return reject(new Error(\"Not a valid number/beatmap\")); this.channel.sendMessage(\"!mp map \"+map+\" \"+gamemode+\" \"+this.randomString()).catch(reject); const validMapListener = () =&gt; { resolve(); this.removeListener(\"_beatmapId\", validMapListener); this.removeListener(\"invalidBeatmapId\", invalidMapListener); }; const invalidMapListener = () =&gt; { reject(new Error(\"Invalid map ID provided\")); this.removeListener(\"_beatmapId\", validMapListener); this.removeListener(\"invalidBeatmapId\", invalidMapListener); }; this.on(\"_beatmapId\", validMapListener); this.on(\"invalidBeatmapId\", invalidMapListener); }); } /** * Set given mods in the lobby * @param {Array&lt;BanchoMod&gt;|string} mods Either an array of BanchoMods or a mods string joined by spaces * @param {boolean} freemod * @async */ setMods(mods, freemod = false) { return new Promise((resolve, reject) =&gt; { let modsString = \"!mp mods \"; if(typeof mods == \"string\") modsString += mods+\" \"; else if(Array.isArray(mods)) { let value = 0; for(const mod of mods) value += mod.enumValue; modsString += value + \" \"; } else return reject(new Error(\"mods need to be string or array of BanchoMods\")); if(freemod) modsString += \"freemod \"; modsString += this.randomString(); this.channel.sendMessage(modsString).catch(reject); const validModListener = () =&gt; { resolve(); this.removeListener(\"_mods\", validModListener); }; this.on(\"_mods\", validModListener); }); } /** * Sets the lobby's name * @param {string} name * @async */ setName(name) { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp name \"+name).catch(reject); const listener = (newName) =&gt; { if(name == newName) { resolve(); this.removeListener(\"_name\", listener); } }; this.on(\"_name\", listener); }); } /** * Sets the lobby's password * @param {string} password * @async */ setPassword(password) { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp password \"+password).catch(reject); const changedListener = () =&gt; { resolve(); this.removeListener(\"passwordChanged\", changedListener); this.removeListener(\"passwordRemoved\", removedListener); }; this.on(\"passwordChanged\", changedListener); const removedListener = () =&gt; { resolve(); this.removeListener(\"passwordChanged\", changedListener); this.removeListener(\"passwordRemoved\", removedListener); }; this.on(\"passwordRemoved\", removedListener); }); } /** * Adds referees to the lobby * @param {Array&lt;string&gt;|string} ref A string or array of strings of referee(s) to add, referenced by their usernames or #&lt;userid&gt; * @async */ addRef(ref) { return new Promise((resolve, reject) =&gt; { let refString; if(typeof ref == \"string\") refString = ref; else if(Array.isArray(ref)) refString = ref.join(\", \"); else return reject(new Error(\"a string or an array of string must be passed\")); this.channel.sendMessage(\"!mp addref \"+refString).then(resolve, reject); }); } /** * Removes referees from the lobby * @param {Array&lt;string&gt;|string} ref A string or array of strings of referee(s) to remove, referenced by their usernames or #&lt;userid&gt; */ removeRef(ref) { return new Promise((resolve, reject) =&gt; { let refString; if(typeof ref == \"string\") refString = ref; else if(Array.isArray(ref)) refString = ref.join(\", \"); else return reject(new Error(\"a string or an array of string must be passed\")); this.channel.sendMessage(\"!mp removeref \"+refString).then(resolve, reject); }); } /** * Locks the lobby's slots and teams * @async */ lockSlots() { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp lock \"+this.randomString()).catch(reject); const listener = () =&gt; { resolve(); this.removeListener(\"slotsLocked\", listener); }; this.on(\"slotsLocked\", listener); }); } /** * Unlocks the lobby's slots and teams * @async */ unlockSlots() { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp unlock \"+this.randomString()).catch(reject); const listener = () =&gt; { resolve(); this.removeListener(\"slotsUnlocked\", listener); }; this.on(\"slotsUnlocked\", listener); }); } /** * Set the amount of open slots in the lobby * @param {number} size * @async */ setSize(size) { return new Promise((resolve, reject) =&gt; { if(isNaN(size) || size &lt; 1 || size &gt; 16) return reject(new Error(\"how can the size not be a number between 1 and 16? try again.\")); this.channel.sendMessage(\"!mp size \"+size+\" \"+this.randomString()).catch(reject); const listener = (newSize) =&gt; { if(size == newSize) { resolve(); this.removeListener(\"_size\", listener); } }; this.on(\"_size\", listener); }); } /** * Sets the settings of the lobby * @param {number} [teamMode] See BanchoLobbyTeamModes * @param {number} [winCondition] See BanchoLobbyWinConditions * @param {number} [size] * @async */ setSettings(teamMode = this.teamMode, winCondition = this.winCondition, size) { return new Promise((resolve, reject) =&gt; { if(isNaN(teamMode) || isNaN(winCondition) || size != null &amp;&amp; (isNaN(size) || size &lt; 1 || size &gt; 16)) return reject(new Error(\"one of the arguments isn't a valid number. try again\")); const listener = (ret) =&gt; { if(teamMode == ret.teamMode &amp;&amp; winCondition == ret.winCondition &amp;&amp; size == ret.size) { resolve(); this.removeListener(\"matchSettings\", listener); } }; this.on(\"matchSettings\", listener); this.channel.sendMessage(\"!mp set \"+teamMode+\" \"+winCondition+\" \"+(size != null ? size : \"\")+\" \"+this.randomString()).catch(reject); }); } /** * Moves a player from one slot to another * @param {BanchoLobbyPlayer} player * @param {number} slot starting from 0 * @async */ movePlayer(player, slot) { return new Promise((resolve, reject) =&gt; { if(!(player instanceof BanchoLobbyPlayer)) return reject(new Error(\"invalid player\")); if(isNaN(slot) || slot &lt; 0 || slot &gt; 15) return reject(new Error(\"how can a slot not be a number between 0 and 15? try again.\")); this.channel.sendMessage(\"!mp move #\"+player.user.id+\" \"+(slot+1)).then(resolve, reject); }); } /** * Invites a player to the lobby * @param {string} player Referenced by their username or #&lt;userid&gt; * @async */ invitePlayer(player) { return new Promise((resolve, reject) =&gt; this.channel.sendMessage(\"!mp invite \"+player).then(resolve, reject) ); } /** * Sets a player as the host of the lobby * @param {string} player Referenced by their username or #&lt;userid&gt; * @async */ setHost(player) { return new Promise((resolve, reject) =&gt; this.channel.sendMessage(\"!mp host \"+player).then(resolve, reject) ); } /** * Kicks a player from the lobby * @param {string} player Referenced by their username or #&lt;userid&gt; * @async */ kickPlayer(player) { return new Promise((resolve, reject) =&gt; this.channel.sendMessage(\"!mp kick \"+player).then(resolve, reject) ); } /** * Bans a player from the lobby * @param {string} player Referenced by their username or #&lt;userid&gt; * @async */ banPlayer(player) { return new Promise((resolve, reject) =&gt; this.channel.sendMessage(\"!mp ban \"+player).then(resolve, reject) ); } /** * Get back the host from one's hand * @async */ clearHost() { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp clearhost \"+this.randomString()).catch(reject); const listener = () =&gt; { resolve(); this.removeListener(\"hostCleared\", listener); }; this.on(\"hostCleared\", listener); }); } /** * Close the lobby * @async */ closeLobby() { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp close \"+this.randomString()).catch(reject); const listener = (member) =&gt; { if(member.user.isClient()) { resolve(); this.channel.removeListener(\"PART\", listener); } }; this.channel.on(\"PART\", listener); }); } /** * Start the match * @param {number} [timeout] Timeout before the game starts. Defaults to 0 * @async */ startMatch(timeout = null) { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp start\"+((timeout != null &amp;&amp; Number(timeout) != 0) ? \" \" + Number(timeout) : \"\")+\" \"+this.randomString()) .then(() =&gt; { if(timeout &gt; 0) resolve(); }) .catch(reject); if(timeout == null) { const listener = () =&gt; { resolve(); this.removeListener(\"matchStarted\", listener); }; this.on(\"matchStarted\", listener); } }); } /** * Start a timer * @param {number} timeout Timeout * @async */ startTimer(timeout) { return new Promise((resolve, reject) =&gt; { if(isNaN(timeout)) return reject(new Error(\"Not a number!\")); this.channel.sendMessage(\"!mp timer \"+timeout+\" \"+this.randomString()).then(resolve).catch(reject); }); } /** * Aborts an ongoing timer * @async */ abortTimer() { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp aborttimer \"+this.randomString()).then(resolve).catch(reject); }); } /** * Abort the match * @async */ abortMatch() { return new Promise((resolve, reject) =&gt; { this.channel.sendMessage(\"!mp abort \"+this.randomString()).catch(reject); const listener = () =&gt; { resolve(); this.removeListener(\"matchAborted\", listener); }; this.on(\"matchAborted\", listener); }); } /** * Change's one team * @param {BanchoLobbyPlayer} player * @param {string} team See BanchoLobbyTeams * @async */ changeTeam(player, team) { return new Promise((resolve, reject) =&gt; { if(team != Teams.Blue &amp;&amp; team != Teams.Red) return reject(new Error(\"invalid team\")); this.channel.sendMessage(\"!mp team #\"+player.user.id+\" \"+team).then(resolve, reject); }); } /** * Fires !mp settings, updates properties and player slots * @async */ updateSettings() { if(this.updateSettingsPromise != null) return this.updateSettingsPromise; return this.updateSettingsPromise = new Promise((callerResolve, callerReject) =&gt; { this.channel.sendMessage(\"!mp settings \"+this.randomString()); // Beginning of the !mp settings message will be handled by handleBanchoBotMessage; ending (player infos) will be handled in the following listener. let amountOfPlayers = null; const slots = this._createSlotsArray(); let initializeMods = true; const modsListener = () =&gt; initializeMods = false; this.on(\"mods\", modsListener); const listener = (msg) =&gt; { if(msg.user.ircUsername.toLowerCase() == \"banchobot\") { if(amountOfPlayers == null) { const playersRegex = Regexes.regexes.playersAmount(msg.message); if(playersRegex) { amountOfPlayers = playersRegex.playersAmount; if(amountOfPlayers == 0) { this.pushSlotsUpdateQueue(() =&gt; { this.slots = slots; this.slotsUpdateCallback(); if(initializeMods) this.mods = []; this.updateSettingsPromise = null; this.removeListener(\"mods\", modsListener); callerResolve(); }); this.channel.removeListener(\"message\", listener); } } } else { const playerRegex = /^Slot (\\d+) +(Not Ready|Ready|No Map) +https:\\/\\/osu\\.ppy\\.sh\\/u\\/(\\d+) (.+)$/; if(playerRegex.test(msg.message)) { const match = playerRegex.exec(msg.message); this.getPlayerById(Number(match[3])).then((player) =&gt; { slots[Number(match[1])-1] = player; player.state = BanchoLobbyPlayerStates[match[2]]; player.isHost = false; player.team = null; player.mods = (this.freemod) ? [] : this.mods; let metadatasString = match[4].substring(player.user.username.length).trim(); if(metadatasString.length &gt; 0) { metadatasString = metadatasString.substr(1, metadatasString.length - 2); for(let metadatasSplit of metadatasString.split(\"/\")) { metadatasSplit = metadatasSplit.trim(); switch(metadatasSplit) { case \"Host\": player.isHost = true; break; case \"Team Blue\": player.team = BanchoLobbyTeams.Blue; break; case \"Team Red\": player.team = BanchoLobbyTeams.Red; break; default: player.mods = BanchoMods.parseLongMods(metadatasSplit); } } } let completedPlayers = 0; for(const slot of slots) { if(slot != null) completedPlayers++; } if(completedPlayers == amountOfPlayers) { this.pushSlotsUpdateQueue(() =&gt; { if (this._allPlayersReadyOnUpdateSettings &amp;&amp; !slots.some((slot) =&gt; (slot &amp;&amp; slot.state === BanchoLobbyPlayerStates.NotReady))) { this.emit(\"allPlayersReady\"); this._allPlayersReadyOnUpdateSettings = false; } this.slots = slots; this.slotsUpdateCallback(); if(initializeMods) this.mods = []; this.updateSettingsPromise = null; this.removeListener(\"mods\", modsListener); callerResolve(); }); this.channel.removeListener(\"message\", listener); } }, (err) =&gt; { this.updateSettingsPromise = null; this.removeListener(\"mods\", modsListener); callerReject(err); }); } } } }; this.channel.on(\"message\", listener); }); } /** * Gets the player who is currently host * @returns {BanchoLobbyPlayer} */ getHost() { for(const player of this.slots) if(player != null &amp;&amp; player.isHost) return player; } /** * Gets the slot of a player * @param {BanchoLobbyPlayer} player * @return {number} */ getPlayerSlot(player) { for(const slotNum in this.slots) if(this.slots[slotNum] == player) return slotNum; } /** * Gets or instanciate a player by its username * @param {string} name * @async */ getPlayerByName(name) { return new Promise((callerResolve, callerReject) =&gt; { if(this.players[name]) return callerResolve(this.players[name]); this.pushPlayerCreationQueue(() =&gt; { if(this.players[name]) { callerResolve(this.players[name]); this.playersCreationCallback(); } else { const user = this.banchojs.getUser(name); const player = new BanchoLobbyPlayer(this, user); const cb = () =&gt; { this.playersById[user.id] = player; this.players[user.username] = player; callerResolve(player); this.playersCreationCallback(); }; if(!user.username || !user.id) user.fetchFromAPI().then(cb).catch((err) =&gt; { callerReject(err); this.playersCreationCallback(); }); else cb(); } }); }); } /** * Gets or instanciate a player by its userid * @async */ getPlayerById(id) { return new Promise((callerResolve, callerReject) =&gt; { if(isNaN(id)) return callerReject(new Error(\"id needs to be a number!\")); if(this.playersById[id]) return callerResolve(this.playersById[id]); this.pushPlayerCreationQueue(() =&gt; { if(this.playersById[id]) { callerResolve(this.playersById[id]); this.playersCreationCallback(); } else this.banchojs.getUserById(id) .then((user) =&gt; { const player = new BanchoLobbyPlayer(this, this.banchojs.getUser(user.username)); this.playersById[id] = player; this.players[user.username] = player; callerResolve(player); this.playersCreationCallback(); }); }); }); } /** * Gets the mp link or however you name it. * @returns {string} */ getHistoryUrl() { return \"https://osu.ppy.sh/community/matches/\"+this.id; } /** * Creates a slots array of 16 players * @private * @returns {Array&lt;null&gt;} */ _createSlotsArray() { const slots = []; for(let i = 0; i &lt; 16; i++) slots[i] = null; return Object.seal(slots); } /** * Sort scores by pass and score. */ sortScores() { this.scores.sort((a, b) =&gt; { if(a.pass &amp;&amp; !b.pass) return -1; else if(!a.pass &amp;&amp; b.pass) return 1; else if(a.score &gt; b.score) return -1; else if(b.score &gt; a.score) return 1; else return 0; }); } get beatmap() { return this._beatmap; } /** * Fired when the beatmap property is updated from the API * @event BanchoLobby#beatmap * @type {nodesu.Beatmap} */ set beatmap(val) { this._setter(\"beatmap\", val); } get name() { return this._name; } /** * Fired when the name of the lobby is updated * @event BanchoLobby#name * @type {string} */ set name(val) { this._setter(\"name\", val); } get beatmapId() { return this._beatmapId; } /** * Fired when the beatmapId is updated * @event BanchoLobby#beatmapId * @type {number} */ set beatmapId(val) { this._setter(\"beatmapId\", val); } get teamMode() { return this._teamMode; } /** * Fired when the team mode is updated * @event BanchoLobby#teamMode * @type {number} * @see BanchoLobbyTeamModes */ set teamMode(val) { const teamModes = [BanchoLobbyTeamModes.TeamVs, BanchoLobbyTeamModes.TagTeamVs]; if(!teamModes.includes(this.teamMode) &amp;&amp; teamModes.includes(val)) { for(let i = 0; i &lt; this.slots.length; i++) { const slot = this.slots[i]; if (slot !== null) { slot.team = i % 2 === 0 ? BanchoLobbyTeams.Blue : BanchoLobbyTeams.Red; } } } this._setter(\"teamMode\", val); } get winCondition() { return this._winCondition; } /** * Fired when the win condition is updated * @event BanchoLobby#winCondition * @type {number} * @see BanchoLobbyWinConditions */ set winCondition(val) { this._setter(\"winCondition\", val); } get mods() { return this._mods; } /** * Fired when the lobby's mods are updated * @event BanchoLobby#mods * @type {Array&lt;BanchoMod&gt;} */ set mods(val) { this._setter(\"mods\", val); } get freemod() { return this._freemod; } /** * Fired when the lobby's freemod property is updated * @event BanchoLobby#freemod * @type {boolean} */ set freemod(val) { this._setter(\"freemod\", val); } get playing() { return this._playing; } /** * Fired when the lobby starts or stops playing * @event BanchoLobby#playing * @type {Symbol} * @see {BanchoLobbyState} */ set playing(val) { this._setter(\"playing\", val); } get slots() { return this._slots; } /** * Fired when the slots of the lobby are updated * @event BanchoLobby#slots * @type {Array&lt;BanchoLobbyPlayer&gt;} */ set slots(val) { this._setter(\"slots\", val); } get size() { return this._size; } /** * Fired when the size of the lobby is updated * @event BanchoLobby#size * @type {number} */ set size(val) { this._setter(\"size\", val); } get gamemode() { return this._gamemode; } /** * Fired when the gamemode of the lobby is updated * @event BanchoLobby#gamemode * @type {nodesu.Mode} */ set gamemode(val) { this._setter(\"gamemode\", val); } /** * Setter for all properties that can fire events * @param {string} prop Property's name * @param {any} val New property * @private */ _setter(prop, val) { if(this[prop] != val) { this[\"_\"+prop] = val; this.emit(prop, val); } // Private event, emitted even when no update. Necessary for some Promises to resolve. this.emit(\"_\"+prop, val); } /** * Generates a random string. Used with generic commands with no args to work around Bancho's anti-spam. * @private */ randomString() { let str = \"0\"; while(!isNaN(str)) str = Math.random().toString(36).slice(2); return str; } } module.exports = BanchoLobby; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_BanchoLobbyPlayer.js.html":{"id":"lib_Multiplayer_BanchoLobbyPlayer.js.html","title":"Source: lib/Multiplayer/BanchoLobbyPlayer.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/BanchoLobbyPlayer.js const BanchoLobbyPlayerStates = require(\"./Enums/BanchoLobbyPlayerStates\"); /** * Represents a player in a lobby * Don't consider the player in the lobby unless it is in the slots array * * @prop {BanchoLobby} lobby * @prop {BanchoUser} user * @prop {Symbol} state ready/not ready/no map, see BanchoLobbyPlayerState * @prop {boolean} isHost * @prop {String} team Blue or Red, see BanchoLobbyTeams * @prop {Array&lt;BanchoMod&gt;} mods * @prop {BanchoLobbyPlayerScore} score */ class BanchoLobbyPlayer { constructor(lobby, user) { this.lobby = lobby; this.user = user; this.reset(); } reset() { this.state = BanchoLobbyPlayerStates[\"Not Ready\"]; this.isHost = false; this.team = null; this.mods = []; this.score = null; } } module.exports = BanchoLobbyPlayer; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_BanchoLobbyPlayerScore.js.html":{"id":"lib_Multiplayer_BanchoLobbyPlayerScore.js.html","title":"Source: lib/Multiplayer/BanchoLobbyPlayerScore.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/BanchoLobbyPlayerScore.js /** * Represents a score done by a player in a lobby * Only contains informations transmitted from IRC: score and pass/fail. * More details available when fetching the API * * @prop {number} score * @prop {boolean} pass * @prop {BanchoLobbyPlayer} player */ class BanchoLobbyPlayerScore { constructor(score, pass, player) { this.score = score; this.pass = pass; this.player = player; } } module.exports = BanchoLobbyPlayerScore; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_Enums_BanchoLobbyPlayerStates.js.html":{"id":"lib_Multiplayer_Enums_BanchoLobbyPlayerStates.js.html","title":"Source: lib/Multiplayer/Enums/BanchoLobbyPlayerStates.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/Enums/BanchoLobbyPlayerStates.js /** * Contains the different player states for players in lobbies: Ready, Not Ready, No Map. * Alias for NotReady: \"Not Ready\" * Alias for NoMap: \"No Map\" * @readonly * @enum {Symbol} */ const BanchoLobbyPlayerStates = { Ready: Symbol(\"Ready\"), NotReady: Symbol(\"Not Ready\"), NoMap: Symbol(\"No Map\"), }; BanchoLobbyPlayerStates[\"Not Ready\"] = BanchoLobbyPlayerStates.NotReady; BanchoLobbyPlayerStates[\"No Map\"] = BanchoLobbyPlayerStates.NoMap; module.exports = Object.freeze(BanchoLobbyPlayerStates); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_BanchoLobbyRegexes.js.html":{"id":"lib_Multiplayer_BanchoLobbyRegexes.js.html","title":"Source: lib/Multiplayer/BanchoLobbyRegexes.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/BanchoLobbyRegexes.js const nodesu = require(\"nodesu\"); const TeamModes = require(\"./Enums/BanchoLobbyTeamModes\"); const WinConditions = require(\"./Enums/BanchoLobbyWinConditions\"); const Mods = require(\"./Enums/BanchoMods\"); /** * @name BanchoLobbyRegexes * @description Regexes to parse BanchoBot's messages in multiplayer lobbies. * @global * @private * @namespace BanchoLobbyRegexes */ module.exports = { /** * Finds and execute the right regex on the given string * @name findRegex * @arg {string} str parsed string * @returns {object} * @memberof BanchoLobbyRegexes * @inner */ findRegex: function(str) { for(const regexName in this.regexes) { const regex = this.regexes[regexName]; const ret = regex(str); if(ret) return { name: regexName, ret: ret }; } }, /** * All the tested regexes * @type {object} * @memberof BanchoLobbyRegexes * @inner */ regexes: { roomName: function(str) { const r = /^Room name: (.+), History: https:\\/\\/osu\\.ppy\\.sh\\/mp\\/(\\d+)$/; if(r.test(str)) { const m = r.exec(str); return { name: m[1], id: Number(m[2]) }; } }, refereeChangedName: function(str) { const r = /^Room name updated to \"(.+)\"$/; if(r.test(str)) { const m = r.exec(str); return { name: m[1] }; } }, teamModeWinConditions: function(str) { const r = /^Team mode: (\\w+), Win condition: (\\w+)$/; if(r.test(str)) { const m = r.exec(str); return { teamMode: TeamModes[m[1]], winCondition: WinConditions[m[2]] }; } }, activeMods: function(str) { const r = /^Active mods: (.+)$/; if(r.test(str)) { const m = r.exec(str); return { mods: Mods.parseLongMods(m[1]), freemod: m[1].indexOf(\"Freemod\") != -1 }; } }, playersAmount: function(str) { const r = /^Players: (\\d+)$/; if(r.test(str)) { const m = r.exec(str); return { playersAmount: Number(m[1]) }; } }, playerChangedBeatmap: function(str) { const r = /^Beatmap changed to: (.+) \\(https:\\/\\/osu\\.ppy\\.sh\\/b\\/(\\d+)\\)$/; if(r.test(str)) { const m = r.exec(str); return { name: m[1], id: Number(m[2]) }; } }, playerChangedTeam: function(str) { const r = /^(.+) changed to (Blue|Red)$/; if(r.test(str)) { const m = r.exec(str); return { name: m[1], team: m[2] }; } }, refereeChangedBeatmap: function(str) { const r = /^Changed beatmap to https:\\/\\/osu\\.ppy\\.sh\\/b\\/(\\d+) (.+)$/; if(r.test(str)) { const m = r.exec(str); return { id: Number(m[1]), name: m[2] }; } }, refereeChangedMode: function(str) { const r = /^Changed match mode to (Osu|Taiko|CatchTheBeat|OsuMania)$/; if(r.test(str)) { const m = r.exec(str); let mode; switch (m[1]) { case \"Osu\": mode = nodesu.Mode.osu; break; case \"Taiko\": mode = nodesu.Mode.taiko; break; case \"CatchTheBeat\": mode = nodesu.Mode.ctb; break; case \"OsuMania\": mode = nodesu.Mode.mania; break; } return { mode: mode }; } }, beatmapFromSettings: function(str) { const r = /^Beatmap: https:\\/\\/osu\\.ppy\\.sh\\/b\\/(\\d+) (.+)$/; if(r.test(str)) { const m = r.exec(str); return { id: Number(m[1]), name: m[2] }; } }, invalidBeatmapId: function(str) { return str == \"Invalid map ID provided\"; }, playerChangingBeatmap: function(str) { return (str == \"Host is changing map...\"); }, refereeChangedMods: function(str) { const r = /^(Enabled (.+)|Disabled all mods), (disabled|enabled) FreeMod$/; if(r.test(str)) { const m = r.exec(str); return { mods: Mods.parseLongMods(m[2]), freemod: m[3] == \"enabled\" }; } }, playerJoined: function(str) { const r = /^(.+) joined in slot (\\d+)( for team (red|blue))?\\.$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1], slot: Number(m[2]), team: (m[4] ? m[4] == \"blue\" ? \"Blue\" : \"Red\" : null) }; } }, playerMoved: function(str) { const r = /^(.+) moved to slot (\\d+)$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1], slot: Number(m[2]) }; } }, playerLeft: function(str) { const r = /^(.+) left the game\\.$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1] }; } }, playerBecameTheHost: function(str) { const r = /^(.+) became the host\\.$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1] }; } }, allPlayersReady: function(str) { return str == \"All players are ready\"; }, matchStarted: function(str) { return str == \"The match has started!\"; }, matchAborted: function(str) { return str == \"Aborted the match\"; }, playerFinished: function(str) { const r = /^(.+) finished playing \\(Score: (\\d+), (FAIL|PASS)ED\\)\\.$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1], score: Number(m[2]), pass: m[3] == \"PASS\" }; } }, matchFinished: function(str) { return str == \"The match has finished!\"; }, passwordRemoved: function(str) { return str == \"Removed the match password\"; }, passwordChanged: function(str) { return str == \"Changed the match password\"; }, refereeAdded: function(str) { const r = /^Added (.+) to the match referees$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1] }; } }, refereeRemoved: function(str) { const r = /^Removed (.+) from the match referees$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1] }; } }, userNotFound: function(str) { return str == \"User not found\"; }, userNotFoundUsername: function(str) { const r = /^User not found: (.+)$/; if(r.test(str)) { const m = r.exec(str); return { username: m[1] }; } }, slotsLocked: function(str) { return str == \"Locked the match\"; }, slotsUnlocked: function(str) { return str == \"Unlocked the match\"; }, matchSize: function(str) { const r = /^Changed match to size (\\d+)$/; if(r.test(str)) { const m = r.exec(str); return { size: Number(m[1]) }; } }, matchSettings: function(str) { const r = /^Changed match settings to ((\\d+) slots, )?(HeadToHead|TagCoop|TeamVs|TagTeamVs)(, (Score|Accuracy|Combo|ScoreV2))?$/; if(r.test(str)) { const m = r.exec(str); return { size: Number(m[2]), teamMode: TeamModes[m[3]], winCondition: WinConditions[m[5]] }; } }, hostCleared: function(str) { return str == \"Cleared match host\"; }, timerEnded: function(str) { return str == \"Countdown finished\"; }, timerAborted: function(str) { return str == \"Countdown aborted\"; }, timerTick: function(str) { const r = /^Countdown ends in (\\d+) (minute|second)s?(?: and (\\d+) seconds?)?$/; if(r.test(str)) { const m = r.exec(str); return { seconds: Number(m[1]) * (m[2] === \"minute\" ? 60 : 1) + (m[3] ? Number(m[3]) : 0) }; } }, startTimerStarted: function(str) { const r = /^Queued the match to start in (\\d+) (minute|second)s?(?: and (\\d+) seconds?)?$/; if(r.test(str)) { const m = r.exec(str); return { seconds: Number(m[1]) * (m[2] === \"minute\" ? 60 : 1) + (m[3] ? Number(m[3]) : 0) }; } }, startTimerAborted: function(str) { return str == \"Aborted the match start timer\"; }, startTimerTick: function(str) { const r = /^Match starts in (\\d+) (minute|second)s?(?: and (\\d+) seconds?)?$/; if(r.test(str)) { const m = r.exec(str); return { seconds: Number(m[1]) * (m[2] === \"minute\" ? 60 : 1) + (m[3] ? Number(m[3]) : 0) }; } } } }; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_Enums_BanchoLobbyTeamModes.js.html":{"id":"lib_Multiplayer_Enums_BanchoLobbyTeamModes.js.html","title":"Source: lib/Multiplayer/Enums/BanchoLobbyTeamModes.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/Enums/BanchoLobbyTeamModes.js /** * The 4 different team modes in Bancho * @enum * @type {number} * @readonly */ const BanchoLobbyTeamModes = { HeadToHead: 0, TagCoop: 1, TeamVs: 2, TagTeamVs: 3 }; module.exports = Object.freeze(BanchoLobbyTeamModes); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_Enums_BanchoLobbyTeams.js.html":{"id":"lib_Multiplayer_Enums_BanchoLobbyTeams.js.html","title":"Source: lib/Multiplayer/Enums/BanchoLobbyTeams.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/Enums/BanchoLobbyTeams.js /** * Contains the 2 different teams in a multiplayer lobby * @readonly * @enum */ const BanchoLobbyTeams = { Blue: \"Blue\", Red: \"Red\" }; module.exports = Object.freeze(BanchoLobbyTeams); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_Enums_BanchoLobbyWinConditions.js.html":{"id":"lib_Multiplayer_Enums_BanchoLobbyWinConditions.js.html","title":"Source: lib/Multiplayer/Enums/BanchoLobbyWinConditions.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/Enums/BanchoLobbyWinConditions.js /** * The four different win conditions on Bancho * @enum * @type {number} * @readonly */ const BanchoLobbyWinConditions = { Score: 0, Accuracy: 1, Combo: 2, ScoreV2: 3 }; module.exports = Object.freeze(BanchoLobbyWinConditions); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoMessage.js.html":{"id":"lib_BanchoMessage.js.html","title":"Source: lib/BanchoMessage.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoMessage.js // eslint-disable-next-line no-control-regex const actionRegex = /^\\x01ACTION( (.+)?)?\\x01$/; /** * Bancho incoming message * @abstract * @prop {BanchoUser} user User the message was sent by * @prop {string} message Message body * @prop {boolean} self Set to true if this message was sent by this instance of bancho.js */ class BanchoMessage { /** * Creates an instance of Message. * @param {BanchoUser} user User the message was sent by * @param {string} message Message body * @param {boolean} self Set to true if this message was sent by this instance of bancho.js */ constructor(user, message, self) { if(new.target === BanchoMessage) throw new Error(\"Don't instanciate an abstract class you dumbass\"); this.user = user; this.message = message; this.self = self; } /** * The content of this message * @returns {string} */ get content() { return this.message; } /** * Tries to parse this message as an ACTION (/me message). * @returns {string} */ getAction() { const action = actionRegex.exec(this.message); if(action) return action[2] || \"\"; } } module.exports = BanchoMessage; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_BanchoMod.js.html":{"id":"lib_Multiplayer_BanchoMod.js.html","title":"Source: lib/Multiplayer/BanchoMod.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/BanchoMod.js /** * Represents an osu! mod with properties to parse/send them to Bancho * See [BanchoMods]{@link BanchoMods} * * @prop {number} enumValue The value as it is stored by osu! servers and returned by the osu! API * @prop {string} shortMod Mod in a 2 letters format, used by !mp mods * @prop {string} longMod Mod in its full name, without spaces. Used by Bancho when printing mods. */ class BanchoMod { constructor(enumValue, shortMod, longMod) { this.enumValue = enumValue; this.shortMod = shortMod; this.longMod = longMod; } } module.exports = BanchoMod; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Multiplayer_Enums_BanchoMods.js.html":{"id":"lib_Multiplayer_Enums_BanchoMods.js.html","title":"Source: lib/Multiplayer/Enums/BanchoMods.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Multiplayer/Enums/BanchoMods.js const BanchoMod = require(\"../BanchoMod\"); const Enum = Object.freeze({ None: new BanchoMod(0, \"none\", \"None\"), NoFail: new BanchoMod(1, \"nf\", \"NoFail\"), Easy: new BanchoMod(2, \"ez\", \"Easy\"), Hidden: new BanchoMod(8, \"hd\", \"Hidden\"), HardRock: new BanchoMod(16, \"hr\", \"HardRock\"), SuddenDeath: new BanchoMod(32, \"sd\", \"SuddenDeath\"), DoubleTime: new BanchoMod(64, \"dt\", \"DoubleTime\"), Relax: new BanchoMod(128, \"rx\", \"Relax\"), HalfTime: new BanchoMod(256, \"ht\", \"HalfTime\"), Nightcore: new BanchoMod(512, \"nc\", \"Nightcore\"), Flashlight: new BanchoMod(1024, \"fl\", \"Flashlight\"), Autoplay: new BanchoMod(2048, \"at\", \"Auto\"), SpunOut: new BanchoMod(4096, \"so\", \"SpunOut\"), Relax2: new BanchoMod(8192, \"ap\", \"Relax2\"), Perfect: new BanchoMod(16384, \"pf\", \"Perfect\"), Key4: new BanchoMod(32768, \"k4\", \"Key4\"), Key5: new BanchoMod(65536, \"k5\", \"Key5\"), Key6: new BanchoMod(131072, \"k6\", \"Key6\"), Key7: new BanchoMod(262144, \"k7\", \"Key7\"), Key8: new BanchoMod(524288, \"k8\", \"Key8\"), FadeIn: new BanchoMod(1048576, \"fi\", \"FadeIn\"), Random: new BanchoMod(2097152, \"rn\", \"Random\"), LastMod: new BanchoMod(4194304, \"lm\", \"LastMod\"), Key9: new BanchoMod(16777216, \"k9\", \"Key9\"), Key10: new BanchoMod(33554432, \"k10\", \"Key10\"), Key1: new BanchoMod(67108864, \"k1\", \"Key1\"), Key3: new BanchoMod(134217728, \"k3\", \"Key3\"), Key2: new BanchoMod(268435456, \"k2\", \"Key2\") }); /** * Static class with a property for each mods and methods to manipulate them. * * @class BanchoMods * @prop {BanchoMod} None * @prop {BanchoMod} NoFail * @prop {BanchoMod} Easy * @prop {BanchoMod} Hidden * @prop {BanchoMod} HardRock * @prop {BanchoMod} SuddenDeath * @prop {BanchoMod} DoubleTime * @prop {BanchoMod} Relax * @prop {BanchoMod} HalfTime * @prop {BanchoMod} Nightcore * @prop {BanchoMod} Flashlight * @prop {BanchoMod} Autoplay * @prop {BanchoMod} SpunOut * @prop {BanchoMod} Relax2 * @prop {BanchoMod} Perfect * @prop {BanchoMod} Key4 * @prop {BanchoMod} Key5 * @prop {BanchoMod} Key6 * @prop {BanchoMod} Key7 * @prop {BanchoMod} Key8 * @prop {BanchoMod} FadeIn * @prop {BanchoMod} Random * @prop {BanchoMod} LastMod * @prop {BanchoMod} Key9 * @prop {BanchoMod} Key10 * @prop {BanchoMod} Key1 * @prop {BanchoMod} Key3 * @prop {BanchoMod} Key2 */ class BanchoMods { constructor() { Object.assign(this, Enum); this.enum = Enum; } /** * Parse mods in their bit flags form and returns them in an array of BanchoMods. * * @param {number} bits Mods combination in bit flags form * @param {boolean} [returnNone=true] Returns [BanchoMods.None] if bits is equal to 0 * @returns {BanchoMods[]} */ parseBitFlags(bits, returnNone = true) { if(bits == 0) if(returnNone) return [Enum.None]; else return []; const mods = []; for(const mod of Object.values(Enum)) if(mod != Enum.None &amp;&amp; (bits &amp; mod.enumValue) == mod.enumValue) mods.push(mod); return mods; } /** * Returns a bits flag integer representing the passed mods. * * @param {BanchoMods[]} mods * @returns {number} */ returnBitFlags(mods) { let ret = 0; for(const mod of mods) ret += mod.enumValue; return ret; } /** * Parse a mod in its short form (eg. HD). Case insensitive. * * @param {String} string * @returns {BanchoMod} */ parseShortMod(string) { for(const modName in Enum) if(Enum[modName].shortMod.toLowerCase() == string.toLowerCase()) return Enum[modName]; return null; } /** * Parse a short mods combination as a string or array of strings. * Accepted string formats: \"HDDT\", \"HD, DT\", \"HD DT\". The amount of spaces doesn't matter. Allowed seperators are comma and spaces. * @param {string|string[]} input */ parseShortMods(input) { let splits = []; if(Array.isArray(input)) splits = input; else if(typeof input == \"string\") { if(input.indexOf(\",\") != -1) splits = input.split(\",\"); else if(input.indexOf(\" \") != -1) splits = input.split(\" \"); else if(input.length % 2 == 0) { splits[0] = \"\"; for(const char of input) if(splits[splits.length - 1].length &lt; 2) splits[splits.length - 1] += char; else splits[splits.length] = char; } else return [input]; } else return null; const mods = []; for(let i = 0; i &lt; splits.length; i++) { const shortMod = this.parseShortMod(splits[i].trim()); if(shortMod) mods.push(shortMod); } return mods; } /** * Parse a mod in its long form (eg. Hidden). Case insensitive. * * @param {String} string * @returns {BanchoMod} */ parseLongMod(string) { for(const modName in Enum) if(Enum[modName].longMod.toLowerCase() == string.toLowerCase()) return Enum[modName]; return null; } /** * Parse a long mods combination as a string or array of strings. * Accepted string formats: \"Hidden, DoubleTime\", \"Hidden DoubleTime\". The amount of spaces doesn't matter. Allowed seperators are comma and spaces. * @param {string|string[]} input */ parseLongMods(input) { let splits = []; if(Array.isArray(input)) splits = input; else if(typeof input == \"string\") { if(input.indexOf(\",\") != -1) splits = input.split(\",\"); else if(input.indexOf(\" \") != -1) splits = input.split(\" \"); else splits = [input]; } else return null; const mods = []; for(let i = 0; i &lt; splits.length; i++) { const longMod = this.parseLongMod(splits[i].trim()); if(longMod) mods.push(longMod); } return mods; } } module.exports = new BanchoMods(); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoMultiplayerChannel.js.html":{"id":"lib_BanchoMultiplayerChannel.js.html","title":"Source: lib/BanchoMultiplayerChannel.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoMultiplayerChannel.js const BanchoLobby = require(\"./Multiplayer/BanchoLobby\"); const BanchoChannel = require(\"./BanchoChannel\"); /** * Represents a multiplayer channel on Bancho. * It is a classic discussion channel, with commands related to the linked lobby on Bancho. * * @prop {BanchoLobby} lobby * * @extends BanchoChannel * @extends EventEmitter */ class BanchoMultiplayerChannel extends BanchoChannel { constructor(banchojs, name) { super(banchojs, name); this.lobby = new BanchoLobby(this); } } module.exports = BanchoMultiplayerChannel; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_BanchoUser.js.html":{"id":"lib_BanchoUser.js.html","title":"Source: lib/BanchoUser.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/BanchoUser.js const EventEmitter = require(\"events\").EventEmitter; const Nodesu = require(\"nodesu\"); const OutgoingBanchoMessage = require(\"./OutgoingBanchoMessage\"); const BanchoWhoisReturn = require(\"./IrcCommands/whois/BanchoWhoisReturn\"); const BanchoBotStatsCommand = require(\"./StatsCommand/BanchoBotStatsCommand\"); /** * Bancho User * @description Optional properties are filled after fetching the API with fetchFromAPI(). * * @property {BanchoClient} banchojs Bancho.js client this user was instancied by * @property {string} ircUsername * @property {number} [id] * @property {string} [username] * @property {Date} [joinDate] * @property {number} [count300] * @property {number} [count100] * @property {number} [count50] * @property {number} [playcount] * @property {number} [rankedScore] * @property {number} [totalScore] * @property {number} [ppRank] * @property {number} [level] * @property {number} [ppRaw] * @property {number} [accuracy] * @property {number} [countRankSS] * @property {number} [countRankS] * @property {number} [countRankA] * @property {number} [country] * @property {number} [totalSecondsPlayed] * @property {number} [ppCountryRank] * @property {Array.&lt;nodesu.UserEvent&gt;} [events] * @extends EventEmitter */ class BanchoUser extends EventEmitter { /** * Creates an instance of BanchoUser. * @param {BanchoClient} banchojs Bancho.js client this user was instancied by * @param {string} ircUsername */ constructor(banchojs, ircUsername) { super(); this.banchojs = banchojs; this.ircUsername = ircUsername; this.whoisUserCallback = null; this.whoisChannelsCallback = null; this.whoisEndCallback = null; this.whoisUserNotFoundCallback = null; this.whoisPromise = null; this.wherePromise = null; this.statsPromise = null; this.listenersInitialized = false; } on() { if(!this.listenersInitialized) { this.banchojs.on(\"PM\", (msg) =&gt; { if(msg.user == this) /** * Emitted when a message is received from a BanchoUser * @event BanchoUser#message * @type {PrivateMessage} */ this.emit(\"message\", msg); }); this.listenersInitialized = true; } super.on.apply(this, arguments); } /** * Fetch the user from the osu! API if possible. Populates all the \"optional\" properties of BanchoUser. * * @async * @throws {Error} osu! API/no API key error * @returns Promise&lt;nodesu.User&gt; */ fetchFromAPI() { if(this.banchojs.osuApi) { return new Promise((resolve, reject) =&gt; { this.banchojs.osuApi.user.get(this.ircUsername, this.banchojs.gamemode, null, Nodesu.LookupType.string).then((user) =&gt; { this.updateFromAPI(user); resolve(user); }, reject); }); } else throw new Error(\"osu! API key is missing!\"); } updateFromAPI(user) { this.id = user.id; this.username = user.username; this.joinDate = user.joinDate; this.count300 = user.count300; this.count100 = user.count100; this.count50 = user.count50; this.playcount = user.playcount; this.rankedScore = user.rankedScore; this.totalScore = user.totalScore; this.ppRank = user.ppRank; this.level = user.level; this.ppRaw = user.ppRaw; this.accuracy = user.accuracy; this.countRankSS = user.countRankSS; this.countRankS = user.countRankS; this.countRankA = user.countRankA; this.country = user.country; this.totalSecondsPlayed = user.totalSecondsPlayed; this.ppCountryRank = user.ppCountryRank; this.events = user.events; } /** * Returns true if the user is the client * * @returns {boolean} */ isClient() { return (this.banchojs.username.toLowerCase() == this.ircUsername.toLowerCase()); } /** * Sends a PM to this user. * * @async * @throws {Error} If we're offline * @param {string} message * @returns {Promise&lt;null&gt;} Resolves when message is sent (rate-limiting) */ sendMessage(message) { return (new OutgoingBanchoMessage(this.banchojs, this, message)).send(); } /** * Sends an ACTION message to this user. * * @async * @throws {Error} If we're offline * @param {string} message * @returns {Promise&lt;null&gt;} Resolves when message is sent (rate-limiting) */ sendAction(message) { return (new OutgoingBanchoMessage(this.banchojs, this, `\\x01ACTION ${message}\\x01`)).send(); } /** * Fires an IRC WHOIS request to the server about this user. Only works on online users. * Throws if the user can't be found or is offline. * * @async * @return {Promise&lt;BanchoWhoisReturn&gt;} */ whois() { if(!this.whoisPromise) this.whoisPromise = new Promise((resolve, reject) =&gt; { const whoisReturn = new BanchoWhoisReturn(this.ircUsername); this.whoisUserCallback = (userId) =&gt; whoisReturn.userId = userId; this.whoisChannelsCallback = (channels) =&gt; whoisReturn.channels = channels; const afterWhois = () =&gt; { this.whoisUserCallback = null; this.whoisChannelsCallback = null; this.whoisEndCallback = null; this.whoisUserNotFoundCallback = null; this.whoisPromise = null; }; this.whoisEndCallback = () =&gt; { this.id = whoisReturn.userId; this.username = whoisReturn.name; resolve(whoisReturn); afterWhois(); }; this.whoisUserNotFoundCallback = () =&gt; { reject(new Error(\"User is offline\")); afterWhois(); }; this.banchojs.send(\"WHOIS \"+this.ircUsername); }); return this.whoisPromise; } /** * Fires a !where command to BanchoBot about this user. Only works on online users. * Throws if the user can't be found or is offline. * * @async * @return {Promise&lt;string&gt;} */ where() { if(!this.wherePromise) this.wherePromise = new Promise((resolve, reject) =&gt; { const answerRegex = /(.+) is in (.+)/; const BanchoBot = this.banchojs.getUser(\"BanchoBot\"); const afterAnswer = () =&gt; { BanchoBot.removeListener(\"message\", listener); this.wherePromise = null; }; const listener = (message) =&gt; { if(message.message == \"The user is currently not online.\") { reject(new Error(\"User is offline\")); return afterAnswer(); } const m = answerRegex.exec(message.message); if(m &amp;&amp; m[1] == this.ircUsername) { resolve(m[2]); afterAnswer(); } }; BanchoBot.on(\"message\", listener); BanchoBot.sendMessage(\"!where \"+this.ircUsername); }); return this.wherePromise; } /** * Fires a !stats command to BanchoBot about this user. Works on online and offline users. * Will update the username, id, rankedScore, ppRank and playcount properties of this user. * Status, levels and accuracy are stored in the returned object, as they are inaccurate data (missing decimals). * It is recommended to get levels and accuracy by polling the osu! API instead. * Throws if the user can't be found. * * @async * @return {Promise&lt;BanchoBotStatsReturn&gt;} */ stats() { if(!this.statsPromise) this.statsPromise = new Promise((resolve, reject) =&gt; { const statsCommand = new BanchoBotStatsCommand(this); statsCommand.run() .then(resolve, reject) .then(() =&gt; this.statsPromise = null); }); return this.statsPromise; } get id() { return this._id; } set id(newId) { if(isNaN(newId)) throw new Error(\"id needs to be a number!\"); if(this._id != null) this.banchojs.usersById.delete(this._id); this._id = newId; this.banchojs.usersById.set(this._id, this); } } module.exports = BanchoUser; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_IrcCommands_whois_BanchoWhoisReturn.js.html":{"id":"lib_IrcCommands_whois_BanchoWhoisReturn.js.html","title":"Source: lib/IrcCommands/whois/BanchoWhoisReturn.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/IrcCommands/whois/BanchoWhoisReturn.js /** * Class describing what is returned after a WHOIS query on an online user * * @prop {string} name Name of the queried user * @prop {number} userId User id of the queried user * @prop {Array&lt;BanchoChannel&gt;} channels Array with every channels the user is in */ class BanchoWhoisReturn { constructor(name) { this.name = name; this.userId = null; this.channels = []; } } module.exports = BanchoWhoisReturn; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_ChannelMessage.js.html":{"id":"lib_ChannelMessage.js.html","title":"Source: lib/ChannelMessage.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/ChannelMessage.js const BanchoMessage = require(\"./BanchoMessage\"); /** * Message received from a Channel * * @prop {BanchoChannel} channel Channel the message was received from * @extends {BanchoMessage} */ class ChannelMessage extends BanchoMessage { /** * Creates an instance of ChannelMessage. * @param {BanchoUser} user User the message was sent by * @param {string} message Message body * @param {boolean} self Set to true if this message was sent by this instance of bancho.js * @param {BanchoChannel} channel Channel the message was received from */ constructor(user, message, self, channel) { super(user, message, self); this.channel = channel; } } module.exports = ChannelMessage; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Enums_ConnectStates.js.html":{"id":"lib_Enums_ConnectStates.js.html","title":"Source: lib/Enums/ConnectStates.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Enums/ConnectStates.js /** * Contains the different connect states: Disconnected, Connecting, Reconnecting, Connected. * @readonly * @enum {Symbol} */ const ConnectStates = { /** When we're purposely disconnected from Bancho or after an auth fail */ Disconnected: Symbol(\"Disconnected\"), /** When we've opened the socket before any reconnection attempts and waiting for the Welcome packet */ Connecting: Symbol(\"Connecting\"), /** When we've gotten disconnected, and are currently waiting before trying to reconnect */ Reconnecting: Symbol(\"Reconnecting\"), /** When we're online! \\o/ */ Connected: Symbol(\"Connected\"), }; module.exports = Object.freeze(ConnectStates); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_Enums_IrcCommands.js.html":{"id":"lib_Enums_IrcCommands.js.html","title":"Source: lib/Enums/IrcCommands.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/Enums/IrcCommands.js const WelcomeCommand = require(\"../IrcCommands/WelcomeCommand\"); const BadAuthCommand = require(\"../IrcCommands/BadAuthCommand\"); const JoinCommand = require(\"../IrcCommands/JoinCommand\"); const PartCommand = require(\"../IrcCommands/PartCommand\"); const MessageCommand = require(\"../IrcCommands/MessageCommand\"); const UserNotFoundCommand = require(\"../IrcCommands/UserNotFoundCommand\"); const ChannelNotFoundCommand = require(\"../IrcCommands/ChannelNotFoundCommand\"); const ChannelTopicCommand = require(\"../IrcCommands/ChannelTopicCommand\"); const NamesCommand = require(\"../IrcCommands/NamesCommand\"); const ModeCommand = require(\"../IrcCommands/ModeCommand\"); const WhoisChannelsCommand = require(\"../IrcCommands/whois/WhoisChannelsCommand.js\"); const WhoisEndCommand = require(\"../IrcCommands/whois/WhoisEndCommand.js\"); const WhoisUserCommand = require(\"../IrcCommands/whois/WhoisUserCommand.js\"); const QuitCommand = require(\"../IrcCommands/QuitCommand.js\"); /** * Contains all the active IRC incoming commands * @readonly * @enum {IrcCommand} * @private */ const IrcCommands = { /** @type {WelcomeCommand} */ \"001\": new WelcomeCommand(), /** @type {WhoisUserCommand} */ \"311\": new WhoisUserCommand(), /** @type {WhoisChannelsCommand} */ \"319\": new WhoisChannelsCommand(), /** @type {WhoisEndCommand} */ \"318\": new WhoisEndCommand(), /** @type {ChannelTopicCommand} */ \"332\": new ChannelTopicCommand(), /** @type {NamesCommand} */ \"353\": new NamesCommand(), /** @type {UserNotFoundCommand} */ \"401\": new UserNotFoundCommand(), /** @type {ChannelNotFoundCommand} */ \"403\": new ChannelNotFoundCommand(), /** @type {BadAuthCommand} */ \"464\": new BadAuthCommand(), /** @type {JoinCommand} */ \"JOIN\": new JoinCommand(), /** @type {PartCommand} */ \"PART\": new PartCommand(), /** @type {ModeCommand} */ \"MODE\": new ModeCommand(), /** @type {MessageCommand} */ \"PRIVMSG\": new MessageCommand(), /** @type {QuitCommand} */ \"QUIT\": new QuitCommand() }; module.exports = Object.freeze(IrcCommands); × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_OutgoingBanchoMessage.js.html":{"id":"lib_OutgoingBanchoMessage.js.html","title":"Source: lib/OutgoingBanchoMessage.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/OutgoingBanchoMessage.js /** * Message to be sent later to a BanchoChannel or BanchoUser * * @prop {BanchoClient} banchojs * @prop {BanchoUser|BanchoChannel} recipient * @prop {string} message */ class OutgoingBanchoMessage { /** * Creates an instance of OutgoingBanchoMessage. * @param {BanchoClient} banchojs * @param {BanchoUser|BanchoChannel} recipient * @param {string} message */ constructor(banchojs, recipient, message) { this.banchojs = banchojs; this.recipient = recipient; this.message = message; } /** * Sends the prepared message to the recipient * * @throws {Error} If recipient isn't a valid type or if we're offline * @returns {Promise&lt;null&gt;} Resolves when message is sent (rate-limiting) */ send() { return new Promise((resolve, reject) =&gt; { this.banchojs.messagesQueue.push({ message: this, resolve, reject, }); if(this.banchojs.messagesQueue.length === 1) this.banchojs.processMessagesQueue(); }); } } module.exports = OutgoingBanchoMessage; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"lib_PrivateMessage.js.html":{"id":"lib_PrivateMessage.js.html","title":"Source: lib/PrivateMessage.js","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Source: lib/PrivateMessage.js const BanchoMessage = require(\"./BanchoMessage\"); /** * Message received in our private inbox * * @extends {BanchoMessage} */ class PrivateMessage extends BanchoMessage { /** * @constructor * @param {BanchoUser} user User the message was sent by * @param {BanchoUser} recipient User the message was sent to * @param {string} message Message body * @param {boolean} self Set to true if this message was sent by this instance of bancho.js */ constructor(user, message, self, recipient) { super(user, message, self); this.recipient = recipient; } } module.exports = PrivateMessage; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"global.html":{"id":"global.html","title":"Global","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Global Members &lt;constant&gt; BanchoLobbyPlayerStates :Symbol Contains the different player states for players in lobbies: Ready, Not Ready, No Map. Alias for NotReady: \"Not Ready\" Alias for NoMap: \"No Map\" Type: Symbol Properties: Name Type Default Description Ready Symbol NotReady Symbol NoMap Symbol Source: lib/Multiplayer/Enums/BanchoLobbyPlayerStates.js, line 8 &lt;constant&gt; BanchoLobbyTeamModes :number The 4 different team modes in Bancho Type: number Properties: Name Type Default Description HeadToHead number 0 TagCoop number 1 TeamVs number 2 TagTeamVs number 3 Source: lib/Multiplayer/Enums/BanchoLobbyTeamModes.js, line 7 &lt;constant&gt; BanchoLobbyTeams Contains the 2 different teams in a multiplayer lobby Properties: Name Type Default Description Blue Blue Red Red Source: lib/Multiplayer/Enums/BanchoLobbyTeams.js, line 6 &lt;constant&gt; BanchoLobbyWinConditions :number The four different win conditions on Bancho Type: number Properties: Name Type Default Description Score number 0 Accuracy number 1 Combo number 2 ScoreV2 number 3 Source: lib/Multiplayer/Enums/BanchoLobbyWinConditions.js, line 7 &lt;constant&gt; ConnectStates :Symbol Contains the different connect states: Disconnected, Connecting, Reconnecting, Connected. Type: Symbol Properties: Name Type Default Description Disconnected Symbol When we're purposely disconnected from Bancho or after an auth fail Connecting Symbol When we've opened the socket before any reconnection attempts and waiting for the Welcome packet Reconnecting Symbol When we've gotten disconnected, and are currently waiting before trying to reconnect Connected Symbol When we're online! \\o/ Source: lib/Enums/ConnectStates.js, line 6 Type Definitions BanchoClientOptions Options for a BanchoClient. Type: object Properties: Name Type Argument Default Description username string Username of the user to connect to Bancho password string IRC Password of the user to connect to Bancho (see https://osu.ppy.sh/p/irc) host string &lt;optional&gt; \"irc.ppy.sh\" Custom IRC host (for proxy-ing through a firewall for example) port number &lt;optional&gt; 6667 Custom IRC port apiKey string &lt;optional&gt; osu! API key for API requests (see https://osu.ppy.sh/p/api). WARNING: Multiplayer lobbies won't work without an API key! rateLimiter RateLimiter &lt;optional&gt; Instance of RateLimiter from the limiter npm module for outgoing Bancho messages. Default is safe for normal users in private messages (PM and #multiplayer channels), bots are not supposed to send public messages. Can be disabled by setting to null. botAccount boolean &lt;optional&gt; false Apply bot account rate-limits to the default RateLimiter instance if true (see https://osu.ppy.sh/wiki/en/Bot_account). gamemode number &lt;optional&gt; null Gamemode id to fetch users with. Defaults to null Source: lib/BanchoClient.js, line 51 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Classes Classes BanchoBotStatsReturn BanchoChannel BanchoChannelMember BanchoChannelMemberMode BanchoClient Banchojs BanchoLobby BanchoLobbyPlayer BanchoLobbyPlayerScore BanchoMessage BanchoMod BanchoMods BanchoMultiplayerChannel BanchoUser BanchoWhoisReturn ChannelMessage OutgoingBanchoMessage PrivateMessage Events JOIN Emitted when someone joins this channel Type: BanchoChannelMember Source: lib/BanchoChannel.js, line 46 message Emitted when a message is received in a BanchoChannel Type: ChannelMessage Source: lib/BanchoChannel.js, line 37 PART Emitted when someone leaves this channel Type: BanchoChannelMember Source: lib/BanchoChannel.js, line 55 CM Fired when a channel message is received, or sent from us (check for the self property). Type: ChannelMessage Source: lib/IrcCommands/MessageCommand.js, line 34 connected Connected to Bancho! Source: lib/BanchoClient.js, line 238 disconnected Disconnected from Bancho! Type: Error Source: lib/BanchoClient.js, line 244 error An error has occured on the socket. Type: Error Source: lib/BanchoClient.js, line 171 JOIN Fired when a user has joined a channel Type: BanchoChannelMember Source: lib/IrcCommands/JoinCommand.js, line 24 nochannel Fired when a no channel error is received from Bancho. Type: BanchoChannel Source: lib/IrcCommands/ChannelNotFoundCommand.js, line 12 nouser Fired when a no user error is received from Bancho. Type: BanchoUser Source: lib/IrcCommands/UserNotFoundCommand.js, line 12 PART Fired when a user has left a channel Type: BanchoChannelMember Source: lib/IrcCommands/PartCommand.js, line 23 PM Fired when a PM is received, or sent from us (check for the self property). Type: PrivateMessage Source: lib/IrcCommands/MessageCommand.js, line 19 QUIT Fired when a user has disconnected from Bancho (with no other client opened) Type: BanchoUser Source: lib/IrcCommands/QuitCommand.js, line 16 rejectedMessage Fired when Bancho sends us back a PM that couldn't be sent. As far as we know, only happens when a PM is rejected because the recipient blocks messages from non-friends. Type: PrivateMessage Source: lib/IrcCommands/MessageCommand.js, line 26 state ConnectState has updated! Emits with an error if any. Type: Error Source: lib/BanchoClient.js, line 250 allPlayersReady Source: lib/Multiplayer/BanchoLobby.js, line 291 beatmap Fired when the beatmap property is updated from the API Type: nodesu.Beatmap Source: lib/Multiplayer/BanchoLobby.js, line 1087 beatmapId Fired when the beatmapId is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1113 beatmapNotFound Emitted when a selected map is not found on the osu! API. Type: number Source: lib/Multiplayer/BanchoLobby.js, line 156 freemod Fired when the lobby's freemod property is updated Type: boolean Source: lib/Multiplayer/BanchoLobby.js, line 1176 gamemode Fired when the gamemode of the lobby is updated Type: nodesu.Mode Source: lib/Multiplayer/BanchoLobby.js, line 1229 host Type: BanchoLobbyPlayer Source: lib/Multiplayer/BanchoLobby.js, line 270 hostCleared Source: lib/Multiplayer/BanchoLobby.js, line 284 invalidBeatmapId Source: lib/Multiplayer/BanchoLobby.js, line 356 matchAborted Source: lib/Multiplayer/BanchoLobby.js, line 326 matchFinished Sorted scores array Type: Array.&lt;BanchoLobbyPlayerScore&gt; Source: lib/Multiplayer/BanchoLobby.js, line 333 matchSettings Type: object Properties: Name Type Description size number teamMode number See BanchoLobbyTeamModes winCondition number See BanchoLobbyWinConditions Source: lib/Multiplayer/BanchoLobby.js, line 397 matchStarted Source: lib/Multiplayer/BanchoLobby.js, line 301 mods Fired when the lobby's mods are updated Type: Array.&lt;BanchoMod&gt; Source: lib/Multiplayer/BanchoLobby.js, line 1163 name Fired when the name of the lobby is updated Type: string Source: lib/Multiplayer/BanchoLobby.js, line 1100 passwordChanged Source: lib/Multiplayer/BanchoLobby.js, line 362 passwordRemoved Source: lib/Multiplayer/BanchoLobby.js, line 359 playerChangedTeam Type: object Properties: Name Type Description player BanchoLobbyPlayer team string See BanchoLobbyTeams Source: lib/Multiplayer/BanchoLobby.js, line 171 playerFinished Type: BanchoLobbyPlayerScore Source: lib/Multiplayer/BanchoLobby.js, line 315 playerJoined Type: object Properties: Name Type Description player BanchoLobbyPlayer slot number Starting from 0 team string Blue or Red Source: lib/Multiplayer/BanchoLobby.js, line 203 playerLeft Type: BanchoLobbyPlayer Source: lib/Multiplayer/BanchoLobby.js, line 249 playerMoved Type: object Properties: Name Type Description player BanchoLobbyPlayer slot number Starting from 0 Source: lib/Multiplayer/BanchoLobby.js, line 226 playing Fired when the lobby starts or stops playing Type: Symbol Source: lib/Multiplayer/BanchoLobby.js, line 1189 See: {BanchoLobbyState} refereeAdded Type: string Source: lib/Multiplayer/BanchoLobby.js, line 379 refereeRemoved Type: string Source: lib/Multiplayer/BanchoLobby.js, line 383 size Fired when the size of the lobby is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1216 slots Fired when the slots of the lobby are updated Type: Array.&lt;BanchoLobbyPlayer&gt; Source: lib/Multiplayer/BanchoLobby.js, line 1203 slotsLocked Source: lib/Multiplayer/BanchoLobby.js, line 368 slotsUnlocked Source: lib/Multiplayer/BanchoLobby.js, line 371 startTimerAborted Emitted when a start timer is aborted Source: lib/Multiplayer/BanchoLobby.js, line 445 startTimerStarted Emitted when a start timer is started Source: lib/Multiplayer/BanchoLobby.js, line 438 startTimerTick Emitted when a start timer ticks Type: object Properties: Name Type Description seconds number Source: lib/Multiplayer/BanchoLobby.js, line 452 teamMode Fired when the team mode is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1126 See: BanchoLobbyTeamModes timerAborted Emitted when a timer is aborted Source: lib/Multiplayer/BanchoLobby.js, line 422 timerEnded Emitted when a timer ends Source: lib/Multiplayer/BanchoLobby.js, line 418 timerTick Emitted when a timer ticks Type: object Properties: Name Type Description seconds number Source: lib/Multiplayer/BanchoLobby.js, line 429 userNotFound Source: lib/Multiplayer/BanchoLobby.js, line 365 userNotFoundUsername Type: string Source: lib/Multiplayer/BanchoLobby.js, line 387 winCondition Fired when the win condition is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1149 See: BanchoLobbyWinConditions JOIN Emitted when someone joins this channel Type: BanchoChannelMember Inherited From: BanchoChannel#event:JOIN Overrides: BanchoChannel#event:JOIN Source: lib/BanchoChannel.js, line 46 message Emitted when a message is received in a BanchoChannel Type: ChannelMessage Inherited From: BanchoChannel#event:message Overrides: BanchoChannel#event:message Source: lib/BanchoChannel.js, line 37 PART Emitted when someone leaves this channel Type: BanchoChannelMember Inherited From: BanchoChannel#event:PART Overrides: BanchoChannel#event:PART Source: lib/BanchoChannel.js, line 55 message Emitted when a message is received from a BanchoUser Type: PrivateMessage Source: lib/BanchoUser.js, line 59 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates bancho.js Current release: 0.11.6 Introduction bancho.js is designed to be the best library when it comes to interacting with Bancho in real-time. It connects over its IRC interface and enables you to do anything Bancho enables you to do, from chatting to managing multiplayer lobbies! It is designed to be reliable and easy to use, as demonstrated by the many projects relying on it! Useful Links Documentation: https://bancho.js.org (Use dropdowns at the top) NPM package: https://npmjs.com/package/bancho.js Git repository: https://git.cartooncraft.fr/ThePooN/bancho.js GitHub mirror: https://github.com/ThePooN/bancho.js Discord server (support/discussion): https://discord.gg/ThePooN Disclaimer Before running a bot on your osu! account, please read the Bot account wiki page. It details conditions under which you can run a bot on your account and eventually getting a dedicated account for it. Please do NOT create an account dedicated to your bot without allowance. This will be considered multi-accounting, which is against the osu! Terms of Use and may lead to sanctions on your account. The library uses sane rate limits for normal user accounts by default. Getting Started First, install the library: npm i bancho.js. Let's get straight into it with a working example. This will print all your incoming PMs to the console: const Banchojs = require(\"bancho.js\"); const client = new Banchojs.BanchoClient({ username: \"ThePooN\", password: \"your_irc_password\" }); client.connect().then(() =&gt; { console.log(\"We're online! Now listening for incoming messages.\"); client.on(\"PM\", (message) =&gt; console.log(`${message.user.ircUsername}: ${message.message}`)); }).catch(console.error); Output: Ghouru: notice me senpai All you need to do to run this example is install bancho.js into your project (npm i bancho.js), paste this code into a file and replace my credentials with yours, from https://osu.ppy.sh/p/irc. This library doesn't limit itself to sending messages though! It also has complete multiplayer support and the ability of firing API requests from BanchoUser objects, and much more! Learn more with the provided examples and documentation! Caching A BanchoClient uses unique BanchoUser instances across its lifespan. The cache never gets cleared and objects never destroyed. Starting with bancho.js v0.10, we support garbage collection of these instances out-of-the-box using WeakRef, introduced in Node.js &gt;= v14.6.0. bancho.js also supports weak-value-map if present, providing garbage collection of BanchoUser objects in Node.js &gt;= v10.0.0. From my own testing, this solution offers better memory usage than Node.js's WeakRef. However, I don't think this can be considered as stable as Node.js's WeakRefs, so I wouldn't recommend using this solution unless necessary. Contributing This library is very near completion. Thanks to everyone who supported and are now (directly or not) using the project! There must still be some improvements to be done though. Feel free to hop on my Discord server so we can figure out issues and improve the code! You can financially support this project by subscribing to my Twitch channel or donating. Compatibility bancho.js supports all currently supported Node.js releases. See Node's LTS schedule. License It is licensed as GPL 3.0. The entire license text is available in the LICENSE file, however I recommend you to take a look at this short summary to get a better idea! × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoBotStatsReturn.html":{"id":"BanchoBotStatsReturn.html","title":"Class: BanchoBotStatsReturn","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoBotStatsReturn BanchoBotStatsReturn Contains properties returned by the BanchoBot !stats command that can't be set in BanchoUser. new BanchoBotStatsReturn() Properties: Name Type Description user BanchoUser level number Truncated value of levels (eg. 102) accuracy number status string In-game status (eg. Afk, Idle, Playing...) online boolean Set to true if user is online in-game. Source: lib/StatsCommand/BanchoBotStatsReturn.js, line 10 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoChannel.html":{"id":"BanchoChannel.html","title":"Class: BanchoChannel","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoChannel BanchoChannel Represents a discussion channel (not including PMs) new BanchoChannel(banchojs, name) Creates an instance of BanchoChannel. Parameters: Name Type Description banchojs BanchoClient bancho.js client name string Channel name as it is referred to on IRC (including #) Properties: Name Type Description name string Channel name as it is referred to on IRC (including #) topic string joined boolean Whether we've joined the channel or not channelMembers Map.&lt;string, BanchoChannelMember&gt; Members of the channel, referenced by their name Source: lib/BanchoChannel.js, line 13 Extends EventEmitter Methods &lt;async&gt; join() Join the channel Source: lib/BanchoChannel.js, line 99 Returns: Type Promise.&lt;null&gt; &lt;async&gt; leave() Leave the channel Source: lib/BanchoChannel.js, line 109 Returns: Type Promise.&lt;null&gt; &lt;async&gt; sendAction(message) Sends an ACTION message to this channel Parameters: Name Type Description message string Source: lib/BanchoChannel.js, line 89 Throws: If we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; &lt;async&gt; sendMessage(message) Sends a message to this channel Elevated Bancho users are advised to heavily sanitize their inputs. Parameters: Name Type Description message string Source: lib/BanchoChannel.js, line 77 Throws: If we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; Events JOIN Emitted when someone joins this channel Type: BanchoChannelMember Source: lib/BanchoChannel.js, line 46 message Emitted when a message is received in a BanchoChannel Type: ChannelMessage Source: lib/BanchoChannel.js, line 37 PART Emitted when someone leaves this channel Type: BanchoChannelMember Source: lib/BanchoChannel.js, line 55 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoChannelMember.html":{"id":"BanchoChannelMember.html","title":"Class: BanchoChannelMember","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoChannelMember BanchoChannelMember A Bancho channel member new BanchoChannelMember() Properties: Name Type Description channel BanchoChannel user BanchoUser mode BanchoChannelMemberMode Source: lib/BanchoChannelMember.js, line 9 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoChannelMemberMode.html":{"id":"BanchoChannelMemberMode.html","title":"Class: BanchoChannelMemberMode","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoChannelMemberMode BanchoChannelMemberMode A Bancho channel user mode, or \"IRC modes\". Used by Bancho to mark someone in a channel as an IRC user or a moderator. new BanchoChannelMemberMode() Properties: Name Type Description ircLetter string Letter used in the MODE command to represent this mode name string Name to describe the mode Source: lib/BanchoChannelMemberMode.js, line 8 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoClient.html":{"id":"BanchoClient.html","title":"Class: BanchoClient","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoClient BanchoClient Client to connect to Bancho over its IRC gateway new BanchoClient(options) Parameters: Name Type Description options BanchoClientOptions Properties: Name Type Description osuApi nodesu.Client Populated with a Nodesu client, if api key is passed to the constructor Source: lib/BanchoClient.js, line 29 Extends EventEmitter Methods &lt;async&gt; connect() Connects to Bancho, rejects an Error if connection fails Source: lib/BanchoClient.js, line 419 Returns: Type Promise.&lt;null, Error&gt; &lt;async&gt; createLobby(name [, privateLobby]) Creates a multiplayer lobby and return its channel. Parameters: Name Type Argument Default Description name string Lobby name privateLobby boolean &lt;optional&gt; false Mark as private Source: lib/BanchoClient.js, line 381 Returns: Type BanchoMultiplayerChannel disconnect() Disconnects from Bancho Source: lib/BanchoClient.js, line 447 getChannel(channelName) Get a BanchoChannel instance for the specified name Parameters: Name Type Description channelName string Source: lib/BanchoClient.js, line 362 Returns: Type BanchoChannel | BanchoMultiplayerChannel getConnectState() Returns the current connection state. Source: lib/BanchoClient.js, line 487 Returns: Current connection state. See ConnectStates Type Symbol getSelf() Get a BanchoUser representing ourself Source: lib/BanchoClient.js, line 329 getUser(username) Get a BanchoUser instance for the specified username Parameters: Name Type Description username string Source: lib/BanchoClient.js, line 316 Returns: Type BanchoUser &lt;async&gt; getUserById(userid) Get a BanchoUser instance for the specified user id Parameters: Name Type Description userid number Source: lib/BanchoClient.js, line 340 Returns: Type Promise.&lt;BanchoUser&gt; isConnected() Returns true if the connectState is Connected, otherwise false. Source: lib/BanchoClient.js, line 496 Returns: Type boolean isDisconnected() Returns true if the connectState is Disconnected, otherwise false. Source: lib/BanchoClient.js, line 505 Returns: Type boolean Events CM Fired when a channel message is received, or sent from us (check for the self property). Type: ChannelMessage Source: lib/IrcCommands/MessageCommand.js, line 34 connected Connected to Bancho! Source: lib/BanchoClient.js, line 238 disconnected Disconnected from Bancho! Type: Error Source: lib/BanchoClient.js, line 244 error An error has occured on the socket. Type: Error Source: lib/BanchoClient.js, line 171 JOIN Fired when a user has joined a channel Type: BanchoChannelMember Source: lib/IrcCommands/JoinCommand.js, line 24 nochannel Fired when a no channel error is received from Bancho. Type: BanchoChannel Source: lib/IrcCommands/ChannelNotFoundCommand.js, line 12 nouser Fired when a no user error is received from Bancho. Type: BanchoUser Source: lib/IrcCommands/UserNotFoundCommand.js, line 12 PART Fired when a user has left a channel Type: BanchoChannelMember Source: lib/IrcCommands/PartCommand.js, line 23 PM Fired when a PM is received, or sent from us (check for the self property). Type: PrivateMessage Source: lib/IrcCommands/MessageCommand.js, line 19 QUIT Fired when a user has disconnected from Bancho (with no other client opened) Type: BanchoUser Source: lib/IrcCommands/QuitCommand.js, line 16 rejectedMessage Fired when Bancho sends us back a PM that couldn't be sent. As far as we know, only happens when a PM is rejected because the recipient blocks messages from non-friends. Type: PrivateMessage Source: lib/IrcCommands/MessageCommand.js, line 26 state ConnectState has updated! Emits with an error if any. Type: Error Source: lib/BanchoClient.js, line 250 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"Banchojs.html":{"id":"Banchojs.html","title":"Class: Banchojs","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: Banchojs Banchojs Main Banchojs class new Banchojs() Properties: Name Type Description BanchoClient BanchoClient The BanchoClient class (Client alias is kept for history purposes) OutgoingBanchoMessage OutgoingBanchoMessage The OutgoingMessage class to produce messages ConnectStates ConnectStates An enum containing all the possible ConnectStates of bancho.js BanchoLobbyPlayerStates BanchoLobbyPlayerStates An enum containing the different player states for players in lobbies BanchoLobbyTeamModes BanchoLobbyTeamModes An enum containing the 4 different team modes in Bancho BanchoLobbyTeams BanchoLobbyTeams An enum containing the 2 different teams in a multiplayer lobby BanchoLobbyWinConditions BanchoLobbyWinConditions An enum containing the 4 win conditions on Bancho Source: index.js, line 11 Methods isBanchoChannel(channel) Compares the provided object and return true if the object is an instance of BanchoChannel. Parameters: Name Type Description channel any Source: index.js, line 60 isBanchoChannelMember(member) Compares the provided object and return true if the object is an instance of BanchoChannelMember. Parameters: Name Type Description member any Source: index.js, line 87 isBanchoLobby(lobby) Compares the provided object and return true if the object is an instance of BanchoLobby. Parameters: Name Type Description lobby any Source: index.js, line 78 isBanchoMessage(message) Compares the provided object and return true if the object is an instance of BanchoMessage. Parameters: Name Type Description message any Source: index.js, line 96 isBanchoMod(mod) Compares the provided object and return true if the object is an instance of BanchoMod. Parameters: Name Type Description mod any Source: index.js, line 42 isBanchoMultiplayerChannel(channel) Compares the provided object and return true if the object is an instance of BanchoMultiplayerChannel. Parameters: Name Type Description channel any Source: index.js, line 69 isBanchoUser(user) Compares the provided object and return true if the object is an instance of BanchoUser. Parameters: Name Type Description user any Source: index.js, line 51 isChannelMessage(message) Compares the provided object and return true if the object is an instance of ChannelMessage. Parameters: Name Type Description message any Source: index.js, line 105 isPrivateMessage(message) Compares the provided object and return true if the object is an instance of PrivateMessage. Parameters: Name Type Description message any Source: index.js, line 114 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoLobby.html":{"id":"BanchoLobby.html","title":"Class: BanchoLobby","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoLobby BanchoLobby Represents a Bancho multiplayer lobby Highly recommended to await updateSettings before manipulating (else some properties will be null). new BanchoLobby() Properties: Name Type Description channel BanchoMultiplayerChannel id number Multiplayer lobby ID (used in multiplayer history links) name string Name of the lobby, as seen in-game slots Array.&lt;BanchoLobbyPlayer&gt; Array of BanchoLobbyPlayer determining each users' slot, from 0 to 15 size number Current size of the lobby gamemode nodesu.ModeType Current gamemode of the lobby, as specified by the latest !mp map call (Bancho limitation) beatmapId number beatmap nodesu.Beatmap Beatmap fetched from the API (late/not as reliable, use beatmapId when possible) winCondition number See BanchoLobbyWinConditions teamMode number See BanchoLobbyTeamModes mods Array.&lt;BanchoMod&gt; freemod boolean playing boolean Whether we're currently playing or not scores Array.&lt;BanchoLobbyPlayerScore&gt; Scores set during the currently ongoing match, or the previous match. Emptied when a new match starts. Sorted by pass and score once match is finished. Source: lib/Multiplayer/BanchoLobby.js, line 32 Methods &lt;async&gt; abortMatch() Abort the match Source: lib/Multiplayer/BanchoLobby.js, line 830 &lt;async&gt; abortTimer() Aborts an ongoing timer Source: lib/Multiplayer/BanchoLobby.js, line 820 &lt;async&gt; addRef(ref) Adds referees to the lobby Parameters: Name Type Description ref Array.&lt;string&gt; | string A string or array of strings of referee(s) to add, referenced by their usernames or # Source: lib/Multiplayer/BanchoLobby.js, line 581 &lt;async&gt; banPlayer(player) Bans a player from the lobby Parameters: Name Type Description player string Referenced by their username or # Source: lib/Multiplayer/BanchoLobby.js, line 741 &lt;async&gt; changeTeam(player, team) Change's one team Parameters: Name Type Description player BanchoLobbyPlayer team string See BanchoLobbyTeams Source: lib/Multiplayer/BanchoLobby.js, line 847 &lt;async&gt; clearHost() Get back the host from one's hand Source: lib/Multiplayer/BanchoLobby.js, line 751 &lt;async&gt; closeLobby() Close the lobby Source: lib/Multiplayer/BanchoLobby.js, line 766 &lt;async&gt; fetchFromAPI() Fetch the lobby from the osu! API. Source: lib/Multiplayer/BanchoLobby.js, line 470 Returns: Promise&lt;nodesu.Multi&gt; getHistoryUrl() Gets the mp link or however you name it. Source: lib/Multiplayer/BanchoLobby.js, line 1049 Returns: Type string getHost() Gets the player who is currently host Source: lib/Multiplayer/BanchoLobby.js, line 963 Returns: Type BanchoLobbyPlayer &lt;async&gt; getPlayerById() Gets or instanciate a player by its userid Source: lib/Multiplayer/BanchoLobby.js, line 1020 &lt;async&gt; getPlayerByName(name) Gets or instanciate a player by its username Parameters: Name Type Description name string Source: lib/Multiplayer/BanchoLobby.js, line 985 getPlayerSlot(player) Gets the slot of a player Parameters: Name Type Description player BanchoLobbyPlayer Source: lib/Multiplayer/BanchoLobby.js, line 974 Returns: Type number &lt;async&gt; invitePlayer(player) Invites a player to the lobby Parameters: Name Type Description player string Referenced by their username or # Source: lib/Multiplayer/BanchoLobby.js, line 708 &lt;async&gt; kickPlayer(player) Kicks a player from the lobby Parameters: Name Type Description player string Referenced by their username or # Source: lib/Multiplayer/BanchoLobby.js, line 730 &lt;async&gt; lockSlots() Locks the lobby's slots and teams Source: lib/Multiplayer/BanchoLobby.js, line 617 &lt;async&gt; movePlayer(player, slot) Moves a player from one slot to another Parameters: Name Type Description player BanchoLobbyPlayer slot number starting from 0 Source: lib/Multiplayer/BanchoLobby.js, line 693 removeRef(ref) Removes referees from the lobby Parameters: Name Type Description ref Array.&lt;string&gt; | string A string or array of strings of referee(s) to remove, referenced by their usernames or # Source: lib/Multiplayer/BanchoLobby.js, line 599 &lt;async&gt; setHost(player) Sets a player as the host of the lobby Parameters: Name Type Description player string Referenced by their username or # Source: lib/Multiplayer/BanchoLobby.js, line 719 &lt;async&gt; setMap(map [, gamemode]) Set a given map in the lobby Parameters: Name Type Argument Description map number | nodesu.Beatmap Either a beatmap ID or a Beatmap object from nodesu gamemode number &lt;optional&gt; See nodesu.Mode. Defaults to current mode (osu! if undetected). Source: lib/Multiplayer/BanchoLobby.js, line 480 &lt;async&gt; setMods(mods, freemod) Set given mods in the lobby Parameters: Name Type Default Description mods Array.&lt;BanchoMod&gt; | string Either an array of BanchoMods or a mods string joined by spaces freemod boolean false Source: lib/Multiplayer/BanchoLobby.js, line 509 &lt;async&gt; setName(name) Sets the lobby's name Parameters: Name Type Description name string Source: lib/Multiplayer/BanchoLobby.js, line 540 &lt;async&gt; setPassword(password) Sets the lobby's password Parameters: Name Type Description password string Source: lib/Multiplayer/BanchoLobby.js, line 558 &lt;async&gt; setSettings( [teamMode] [, winCondition] [, size]) Sets the settings of the lobby Parameters: Name Type Argument Description teamMode number &lt;optional&gt; See BanchoLobbyTeamModes winCondition number &lt;optional&gt; See BanchoLobbyWinConditions size number &lt;optional&gt; Source: lib/Multiplayer/BanchoLobby.js, line 670 &lt;async&gt; setSize(size) Set the amount of open slots in the lobby Parameters: Name Type Description size number Source: lib/Multiplayer/BanchoLobby.js, line 648 sortScores() Sort scores by pass and score. Source: lib/Multiplayer/BanchoLobby.js, line 1068 &lt;async&gt; startMatch( [timeout]) Start the match Parameters: Name Type Argument Default Description timeout number &lt;optional&gt; null Timeout before the game starts. Defaults to 0 Source: lib/Multiplayer/BanchoLobby.js, line 784 &lt;async&gt; startTimer(timeout) Start a timer Parameters: Name Type Description timeout number Timeout Source: lib/Multiplayer/BanchoLobby.js, line 808 &lt;async&gt; unlockSlots() Unlocks the lobby's slots and teams Source: lib/Multiplayer/BanchoLobby.js, line 632 &lt;async&gt; updateSettings() Fires !mp settings, updates properties and player slots Source: lib/Multiplayer/BanchoLobby.js, line 859 Events allPlayersReady Source: lib/Multiplayer/BanchoLobby.js, line 291 beatmap Fired when the beatmap property is updated from the API Type: nodesu.Beatmap Source: lib/Multiplayer/BanchoLobby.js, line 1087 beatmapId Fired when the beatmapId is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1113 beatmapNotFound Emitted when a selected map is not found on the osu! API. Type: number Source: lib/Multiplayer/BanchoLobby.js, line 156 freemod Fired when the lobby's freemod property is updated Type: boolean Source: lib/Multiplayer/BanchoLobby.js, line 1176 gamemode Fired when the gamemode of the lobby is updated Type: nodesu.Mode Source: lib/Multiplayer/BanchoLobby.js, line 1229 host Type: BanchoLobbyPlayer Source: lib/Multiplayer/BanchoLobby.js, line 270 hostCleared Source: lib/Multiplayer/BanchoLobby.js, line 284 invalidBeatmapId Source: lib/Multiplayer/BanchoLobby.js, line 356 matchAborted Source: lib/Multiplayer/BanchoLobby.js, line 326 matchFinished Sorted scores array Type: Array.&lt;BanchoLobbyPlayerScore&gt; Source: lib/Multiplayer/BanchoLobby.js, line 333 matchSettings Type: object Properties: Name Type Description size number teamMode number See BanchoLobbyTeamModes winCondition number See BanchoLobbyWinConditions Source: lib/Multiplayer/BanchoLobby.js, line 397 matchStarted Source: lib/Multiplayer/BanchoLobby.js, line 301 mods Fired when the lobby's mods are updated Type: Array.&lt;BanchoMod&gt; Source: lib/Multiplayer/BanchoLobby.js, line 1163 name Fired when the name of the lobby is updated Type: string Source: lib/Multiplayer/BanchoLobby.js, line 1100 passwordChanged Source: lib/Multiplayer/BanchoLobby.js, line 362 passwordRemoved Source: lib/Multiplayer/BanchoLobby.js, line 359 playerChangedTeam Type: object Properties: Name Type Description player BanchoLobbyPlayer team string See BanchoLobbyTeams Source: lib/Multiplayer/BanchoLobby.js, line 171 playerFinished Type: BanchoLobbyPlayerScore Source: lib/Multiplayer/BanchoLobby.js, line 315 playerJoined Type: object Properties: Name Type Description player BanchoLobbyPlayer slot number Starting from 0 team string Blue or Red Source: lib/Multiplayer/BanchoLobby.js, line 203 playerLeft Type: BanchoLobbyPlayer Source: lib/Multiplayer/BanchoLobby.js, line 249 playerMoved Type: object Properties: Name Type Description player BanchoLobbyPlayer slot number Starting from 0 Source: lib/Multiplayer/BanchoLobby.js, line 226 playing Fired when the lobby starts or stops playing Type: Symbol Source: lib/Multiplayer/BanchoLobby.js, line 1189 See: {BanchoLobbyState} refereeAdded Type: string Source: lib/Multiplayer/BanchoLobby.js, line 379 refereeRemoved Type: string Source: lib/Multiplayer/BanchoLobby.js, line 383 size Fired when the size of the lobby is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1216 slots Fired when the slots of the lobby are updated Type: Array.&lt;BanchoLobbyPlayer&gt; Source: lib/Multiplayer/BanchoLobby.js, line 1203 slotsLocked Source: lib/Multiplayer/BanchoLobby.js, line 368 slotsUnlocked Source: lib/Multiplayer/BanchoLobby.js, line 371 startTimerAborted Emitted when a start timer is aborted Source: lib/Multiplayer/BanchoLobby.js, line 445 startTimerStarted Emitted when a start timer is started Source: lib/Multiplayer/BanchoLobby.js, line 438 startTimerTick Emitted when a start timer ticks Type: object Properties: Name Type Description seconds number Source: lib/Multiplayer/BanchoLobby.js, line 452 teamMode Fired when the team mode is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1126 See: BanchoLobbyTeamModes timerAborted Emitted when a timer is aborted Source: lib/Multiplayer/BanchoLobby.js, line 422 timerEnded Emitted when a timer ends Source: lib/Multiplayer/BanchoLobby.js, line 418 timerTick Emitted when a timer ticks Type: object Properties: Name Type Description seconds number Source: lib/Multiplayer/BanchoLobby.js, line 429 userNotFound Source: lib/Multiplayer/BanchoLobby.js, line 365 userNotFoundUsername Type: string Source: lib/Multiplayer/BanchoLobby.js, line 387 winCondition Fired when the win condition is updated Type: number Source: lib/Multiplayer/BanchoLobby.js, line 1149 See: BanchoLobbyWinConditions × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoLobbyPlayer.html":{"id":"BanchoLobbyPlayer.html","title":"Class: BanchoLobbyPlayer","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoLobbyPlayer BanchoLobbyPlayer Represents a player in a lobby Don't consider the player in the lobby unless it is in the slots array new BanchoLobbyPlayer() Properties: Name Type Description lobby BanchoLobby user BanchoUser state Symbol ready/not ready/no map, see BanchoLobbyPlayerState isHost boolean team String Blue or Red, see BanchoLobbyTeams mods Array.&lt;BanchoMod&gt; score BanchoLobbyPlayerScore Source: lib/Multiplayer/BanchoLobbyPlayer.js, line 15 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoLobbyPlayerScore.html":{"id":"BanchoLobbyPlayerScore.html","title":"Class: BanchoLobbyPlayerScore","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoLobbyPlayerScore BanchoLobbyPlayerScore Represents a score done by a player in a lobby Only contains informations transmitted from IRC: score and pass/fail. More details available when fetching the API new BanchoLobbyPlayerScore() Properties: Name Type Description score number pass boolean player BanchoLobbyPlayer Source: lib/Multiplayer/BanchoLobbyPlayerScore.js, line 10 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoMessage.html":{"id":"BanchoMessage.html","title":"Class: BanchoMessage","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoMessage BanchoMessage Bancho incoming message &lt;abstract&gt; new BanchoMessage(user, message, self) Creates an instance of Message. Parameters: Name Type Description user BanchoUser User the message was sent by message string Message body self boolean Set to true if this message was sent by this instance of bancho.js Properties: Name Type Description user BanchoUser User the message was sent by message string Message body self boolean Set to true if this message was sent by this instance of bancho.js Source: lib/BanchoMessage.js, line 12 Members content The content of this message Source: lib/BanchoMessage.js, line 32 Methods getAction() Tries to parse this message as an ACTION (/me message). Source: lib/BanchoMessage.js, line 40 Returns: Type string × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoMod.html":{"id":"BanchoMod.html","title":"Class: BanchoMod","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoMod BanchoMod Represents an osu! mod with properties to parse/send them to Bancho See BanchoMods new BanchoMod() Properties: Name Type Description enumValue number The value as it is stored by osu! servers and returned by the osu! API shortMod string Mod in a 2 letters format, used by !mp mods longMod string Mod in its full name, without spaces. Used by Bancho when printing mods. Source: lib/Multiplayer/BanchoMod.js, line 9 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoMods.html":{"id":"BanchoMods.html","title":"Class: BanchoMods","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoMods BanchoMods new BanchoMods() Static class with a property for each mods and methods to manipulate them. Properties: Name Type Description None BanchoMod NoFail BanchoMod Easy BanchoMod Hidden BanchoMod HardRock BanchoMod SuddenDeath BanchoMod DoubleTime BanchoMod Relax BanchoMod HalfTime BanchoMod Nightcore BanchoMod Flashlight BanchoMod Autoplay BanchoMod SpunOut BanchoMod Relax2 BanchoMod Perfect BanchoMod Key4 BanchoMod Key5 BanchoMod Key6 BanchoMod Key7 BanchoMod Key8 BanchoMod FadeIn BanchoMod Random BanchoMod LastMod BanchoMod Key9 BanchoMod Key10 BanchoMod Key1 BanchoMod Key3 BanchoMod Key2 BanchoMod Source: lib/Multiplayer/Enums/BanchoMods.js, line 34 Methods parseBitFlags(bits [, returnNone]) Parse mods in their bit flags form and returns them in an array of BanchoMods. Parameters: Name Type Argument Default Description bits number Mods combination in bit flags form returnNone boolean &lt;optional&gt; true Returns [BanchoMods.None] if bits is equal to 0 Source: lib/Multiplayer/Enums/BanchoMods.js, line 80 Returns: Type Array.&lt;BanchoMods&gt; parseLongMod(string) Parse a mod in its long form (eg. Hidden). Case insensitive. Parameters: Name Type Description string String Source: lib/Multiplayer/Enums/BanchoMods.js, line 164 Returns: Type BanchoMod parseLongMods(input) Parse a long mods combination as a string or array of strings. Accepted string formats: \"Hidden, DoubleTime\", \"Hidden DoubleTime\". The amount of spaces doesn't matter. Allowed seperators are comma and spaces. Parameters: Name Type Description input string | Array.&lt;string&gt; Source: lib/Multiplayer/Enums/BanchoMods.js, line 176 parseShortMod(string) Parse a mod in its short form (eg. HD). Case insensitive. Parameters: Name Type Description string String Source: lib/Multiplayer/Enums/BanchoMods.js, line 114 Returns: Type BanchoMod parseShortMods(input) Parse a short mods combination as a string or array of strings. Accepted string formats: \"HDDT\", \"HD, DT\", \"HD DT\". The amount of spaces doesn't matter. Allowed seperators are comma and spaces. Parameters: Name Type Description input string | Array.&lt;string&gt; Source: lib/Multiplayer/Enums/BanchoMods.js, line 126 returnBitFlags(mods) Returns a bits flag integer representing the passed mods. Parameters: Name Type Description mods Array.&lt;BanchoMods&gt; Source: lib/Multiplayer/Enums/BanchoMods.js, line 101 Returns: Type number × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoMultiplayerChannel.html":{"id":"BanchoMultiplayerChannel.html","title":"Class: BanchoMultiplayerChannel","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoMultiplayerChannel BanchoMultiplayerChannel Represents a multiplayer channel on Bancho. It is a classic discussion channel, with commands related to the linked lobby on Bancho. new BanchoMultiplayerChannel() Properties: Name Type Description lobby BanchoLobby Source: lib/BanchoMultiplayerChannel.js, line 13 Extends BanchoChannel EventEmitter Methods &lt;async&gt; join() Join the channel Inherited From: BanchoChannel#join Overrides: BanchoChannel#join Source: lib/BanchoChannel.js, line 99 Returns: Type Promise.&lt;null&gt; &lt;async&gt; leave() Leave the channel Inherited From: BanchoChannel#leave Overrides: BanchoChannel#leave Source: lib/BanchoChannel.js, line 109 Returns: Type Promise.&lt;null&gt; &lt;async&gt; sendAction(message) Sends an ACTION message to this channel Parameters: Name Type Description message string Inherited From: BanchoChannel#sendAction Overrides: BanchoChannel#sendAction Source: lib/BanchoChannel.js, line 89 Throws: If we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; &lt;async&gt; sendMessage(message) Sends a message to this channel Elevated Bancho users are advised to heavily sanitize their inputs. Parameters: Name Type Description message string Inherited From: BanchoChannel#sendMessage Overrides: BanchoChannel#sendMessage Source: lib/BanchoChannel.js, line 77 Throws: If we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; Events JOIN Emitted when someone joins this channel Type: BanchoChannelMember Inherited From: BanchoChannel#event:JOIN Overrides: BanchoChannel#event:JOIN Source: lib/BanchoChannel.js, line 46 message Emitted when a message is received in a BanchoChannel Type: ChannelMessage Inherited From: BanchoChannel#event:message Overrides: BanchoChannel#event:message Source: lib/BanchoChannel.js, line 37 PART Emitted when someone leaves this channel Type: BanchoChannelMember Inherited From: BanchoChannel#event:PART Overrides: BanchoChannel#event:PART Source: lib/BanchoChannel.js, line 55 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoUser.html":{"id":"BanchoUser.html","title":"Class: BanchoUser","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoUser BanchoUser Bancho User new BanchoUser(banchojs, ircUsername) Optional properties are filled after fetching the API with fetchFromAPI(). Parameters: Name Type Description banchojs BanchoClient Bancho.js client this user was instancied by ircUsername string Properties: Name Type Argument Description banchojs BanchoClient Bancho.js client this user was instancied by ircUsername string id number &lt;optional&gt; username string &lt;optional&gt; joinDate Date &lt;optional&gt; count300 number &lt;optional&gt; count100 number &lt;optional&gt; count50 number &lt;optional&gt; playcount number &lt;optional&gt; rankedScore number &lt;optional&gt; totalScore number &lt;optional&gt; ppRank number &lt;optional&gt; level number &lt;optional&gt; ppRaw number &lt;optional&gt; accuracy number &lt;optional&gt; countRankSS number &lt;optional&gt; countRankS number &lt;optional&gt; countRankA number &lt;optional&gt; country number &lt;optional&gt; totalSecondsPlayed number &lt;optional&gt; ppCountryRank number &lt;optional&gt; events Array.&lt;nodesu.UserEvent&gt; &lt;optional&gt; Source: lib/BanchoUser.js, line 35 Extends EventEmitter Methods &lt;async&gt; fetchFromAPI() Fetch the user from the osu! API if possible. Populates all the \"optional\" properties of BanchoUser. Source: lib/BanchoUser.js, line 78 Throws: osu! API/no API key error Type Error Returns: Promise&lt;nodesu.User&gt; isClient() Returns true if the user is the client Source: lib/BanchoUser.js, line 119 Returns: Type boolean &lt;async&gt; sendAction(message) Sends an ACTION message to this user. Parameters: Name Type Description message string Source: lib/BanchoUser.js, line 143 Throws: If we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; &lt;async&gt; sendMessage(message) Sends a PM to this user. Parameters: Name Type Description message string Source: lib/BanchoUser.js, line 131 Throws: If we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; &lt;async&gt; stats() Fires a !stats command to BanchoBot about this user. Works on online and offline users. Will update the username, id, rankedScore, ppRank and playcount properties of this user. Status, levels and accuracy are stored in the returned object, as they are inaccurate data (missing decimals). It is recommended to get levels and accuracy by polling the osu! API instead. Throws if the user can't be found. Source: lib/BanchoUser.js, line 226 Returns: Type Promise.&lt;BanchoBotStatsReturn&gt; &lt;async&gt; where() Fires a !where command to BanchoBot about this user. Only works on online users. Throws if the user can't be found or is offline. Source: lib/BanchoUser.js, line 190 Returns: Type Promise.&lt;string&gt; &lt;async&gt; whois() Fires an IRC WHOIS request to the server about this user. Only works on online users. Throws if the user can't be found or is offline. Source: lib/BanchoUser.js, line 154 Returns: Type Promise.&lt;BanchoWhoisReturn&gt; Events message Emitted when a message is received from a BanchoUser Type: PrivateMessage Source: lib/BanchoUser.js, line 59 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"BanchoWhoisReturn.html":{"id":"BanchoWhoisReturn.html","title":"Class: BanchoWhoisReturn","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: BanchoWhoisReturn BanchoWhoisReturn Class describing what is returned after a WHOIS query on an online user new BanchoWhoisReturn() Properties: Name Type Description name string Name of the queried user userId number User id of the queried user channels Array.&lt;BanchoChannel&gt; Array with every channels the user is in Source: lib/IrcCommands/whois/BanchoWhoisReturn.js, line 8 × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"ChannelMessage.html":{"id":"ChannelMessage.html","title":"Class: ChannelMessage","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: ChannelMessage ChannelMessage Message received from a Channel new ChannelMessage(user, message, self, channel) Creates an instance of ChannelMessage. Parameters: Name Type Description user BanchoUser User the message was sent by message string Message body self boolean Set to true if this message was sent by this instance of bancho.js channel BanchoChannel Channel the message was received from Properties: Name Type Description channel BanchoChannel Channel the message was received from Source: lib/ChannelMessage.js, line 9 Extends BanchoMessage Members content The content of this message Inherited From: BanchoMessage#content Overrides: BanchoMessage#content Source: lib/BanchoMessage.js, line 32 Methods getAction() Tries to parse this message as an ACTION (/me message). Inherited From: BanchoMessage#getAction Overrides: BanchoMessage#getAction Source: lib/BanchoMessage.js, line 40 Returns: Type string × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"OutgoingBanchoMessage.html":{"id":"OutgoingBanchoMessage.html","title":"Class: OutgoingBanchoMessage","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: OutgoingBanchoMessage OutgoingBanchoMessage Message to be sent later to a BanchoChannel or BanchoUser new OutgoingBanchoMessage(banchojs, recipient, message) Creates an instance of OutgoingBanchoMessage. Parameters: Name Type Description banchojs BanchoClient recipient BanchoUser | BanchoChannel message string Properties: Name Type Description banchojs BanchoClient recipient BanchoUser | BanchoChannel message string Source: lib/OutgoingBanchoMessage.js, line 8 Methods send() Sends the prepared message to the recipient Source: lib/OutgoingBanchoMessage.js, line 27 Throws: If recipient isn't a valid type or if we're offline Type Error Returns: Resolves when message is sent (rate-limiting) Type Promise.&lt;null&gt; × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "},"PrivateMessage.html":{"id":"PrivateMessage.html","title":"Class: PrivateMessage","body":" bancho.js Classes BanchoBotStatsReturnBanchoChannelBanchoChannelMemberBanchoChannelMemberModeBanchoClientBanchojsBanchoLobbyBanchoLobbyPlayerBanchoLobbyPlayerScoreBanchoMessageBanchoModBanchoModsBanchoMultiplayerChannelBanchoUserBanchoWhoisReturnChannelMessageOutgoingBanchoMessagePrivateMessage Events BanchoChannel#event:JOINBanchoChannel#event:messageBanchoChannel#event:PARTBanchoClient#event:CMBanchoClient#event:connectedBanchoClient#event:disconnectedBanchoClient#event:errorBanchoClient#event:JOINBanchoClient#event:nochannelBanchoClient#event:nouserBanchoClient#event:PARTBanchoClient#event:PMBanchoClient#event:QUITBanchoClient#event:rejectedMessageBanchoClient#event:stateBanchoLobby#event:allPlayersReadyBanchoLobby#event:beatmapBanchoLobby#event:beatmapIdBanchoLobby#event:beatmapNotFoundBanchoLobby#event:freemodBanchoLobby#event:gamemodeBanchoLobby#event:hostBanchoLobby#event:hostClearedBanchoLobby#event:invalidBeatmapIdBanchoLobby#event:matchAbortedBanchoLobby#event:matchFinishedBanchoLobby#event:matchSettingsBanchoLobby#event:matchStartedBanchoLobby#event:modsBanchoLobby#event:nameBanchoLobby#event:passwordChangedBanchoLobby#event:passwordRemovedBanchoLobby#event:playerChangedTeamBanchoLobby#event:playerFinishedBanchoLobby#event:playerJoinedBanchoLobby#event:playerLeftBanchoLobby#event:playerMovedBanchoLobby#event:playingBanchoLobby#event:refereeAddedBanchoLobby#event:refereeRemovedBanchoLobby#event:sizeBanchoLobby#event:slotsBanchoLobby#event:slotsLockedBanchoLobby#event:slotsUnlockedBanchoLobby#event:startTimerAbortedBanchoLobby#event:startTimerStartedBanchoLobby#event:startTimerTickBanchoLobby#event:teamModeBanchoLobby#event:timerAbortedBanchoLobby#event:timerEndedBanchoLobby#event:timerTickBanchoLobby#event:userNotFoundBanchoLobby#event:userNotFoundUsernameBanchoLobby#event:winConditionBanchoMultiplayerChannel#event:JOINBanchoMultiplayerChannel#event:messageBanchoMultiplayerChannel#event:PARTBanchoUser#event:message Global BanchoLobbyPlayerStatesBanchoLobbyTeamModesBanchoLobbyTeamsBanchoLobbyWinConditionsConnectStates Class: PrivateMessage PrivateMessage Message received in our private inbox new PrivateMessage(user, recipient, message, self) Parameters: Name Type Description user BanchoUser User the message was sent by recipient BanchoUser User the message was sent to message string Message body self boolean Set to true if this message was sent by this instance of bancho.js Source: lib/PrivateMessage.js, line 8 Extends BanchoMessage Members content The content of this message Inherited From: BanchoMessage#content Overrides: BanchoMessage#content Source: lib/BanchoMessage.js, line 32 Methods getAction() Tries to parse this message as an ACTION (/me message). Inherited From: BanchoMessage#getAction Overrides: BanchoMessage#getAction Source: lib/BanchoMessage.js, line 40 Returns: Type string × Search results Close Documentation generated by JSDoc 3.6.11 on Wed Nov 22nd 2023 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
